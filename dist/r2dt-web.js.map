{"version":3,"file":"r2dt-web.js","mappings":"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","sources":["webpack://@rnacentral/r2dt-web/./node_modules/svg-pan-zoom/src/utilities.js","webpack://@rnacentral/r2dt-web/./node_modules/save-svg-as-png/lib/saveSvgAsPng.js","webpack://@rnacentral/r2dt-web/./node_modules/svg-pan-zoom/src/uniwheel.js","webpack://@rnacentral/r2dt-web/./node_modules/svg-pan-zoom/src/svg-utilities.js","webpack://@rnacentral/r2dt-web/./node_modules/svg-pan-zoom/src/svg-pan-zoom.js","webpack://@rnacentral/r2dt-web/./node_modules/svg-pan-zoom/src/browserify.js","webpack://@rnacentral/r2dt-web/./node_modules/svg-pan-zoom/src/shadow-viewport.js","webpack://@rnacentral/r2dt-web/./node_modules/svg-pan-zoom/src/control-icons.js","webpack://@rnacentral/r2dt-web/webpack/bootstrap","webpack://@rnacentral/r2dt-web/webpack/runtime/compat get default export","webpack://@rnacentral/r2dt-web/webpack/runtime/define property getters","webpack://@rnacentral/r2dt-web/webpack/runtime/hasOwnProperty shorthand","webpack://@rnacentral/r2dt-web/./src/buttons.js","webpack://@rnacentral/r2dt-web/./src/app.js","webpack://@rnacentral/r2dt-web/./src/styles.js","webpack://@rnacentral/r2dt-web/./src/legend.js"],"sourcesContent":["module.exports = {\n  /**\n   * Extends an object\n   *\n   * @param  {Object} target object to extend\n   * @param  {Object} source object to take properties from\n   * @return {Object}        extended object\n   */\n  extend: function(target, source) {\n    target = target || {};\n    for (var prop in source) {\n      // Go recursively\n      if (this.isObject(source[prop])) {\n        target[prop] = this.extend(target[prop], source[prop]);\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n    return target;\n  },\n\n  /**\n   * Checks if an object is a DOM element\n   *\n   * @param  {Object}  o HTML element or String\n   * @return {Boolean}   returns true if object is a DOM element\n   */\n  isElement: function(o) {\n    return (\n      o instanceof HTMLElement ||\n      o instanceof SVGElement ||\n      o instanceof SVGSVGElement || //DOM2\n      (o &&\n        typeof o === \"object\" &&\n        o !== null &&\n        o.nodeType === 1 &&\n        typeof o.nodeName === \"string\")\n    );\n  },\n\n  /**\n   * Checks if an object is an Object\n   *\n   * @param  {Object}  o Object\n   * @return {Boolean}   returns true if object is an Object\n   */\n  isObject: function(o) {\n    return Object.prototype.toString.call(o) === \"[object Object]\";\n  },\n\n  /**\n   * Checks if variable is Number\n   *\n   * @param  {Integer|Float}  n\n   * @return {Boolean}   returns true if variable is Number\n   */\n  isNumber: function(n) {\n    return !isNaN(parseFloat(n)) && isFinite(n);\n  },\n\n  /**\n   * Search for an SVG element\n   *\n   * @param  {Object|String} elementOrSelector DOM Element or selector String\n   * @return {Object|Null}                   SVG or null\n   */\n  getSvg: function(elementOrSelector) {\n    var element, svg;\n\n    if (!this.isElement(elementOrSelector)) {\n      // If selector provided\n      if (\n        typeof elementOrSelector === \"string\" ||\n        elementOrSelector instanceof String\n      ) {\n        // Try to find the element\n        element = document.querySelector(elementOrSelector);\n\n        if (!element) {\n          throw new Error(\n            \"Provided selector did not find any elements. Selector: \" +\n              elementOrSelector\n          );\n          return null;\n        }\n      } else {\n        throw new Error(\"Provided selector is not an HTML object nor String\");\n        return null;\n      }\n    } else {\n      element = elementOrSelector;\n    }\n\n    if (element.tagName.toLowerCase() === \"svg\") {\n      svg = element;\n    } else {\n      if (element.tagName.toLowerCase() === \"object\") {\n        svg = element.contentDocument.documentElement;\n      } else {\n        if (element.tagName.toLowerCase() === \"embed\") {\n          svg = element.getSVGDocument().documentElement;\n        } else {\n          if (element.tagName.toLowerCase() === \"img\") {\n            throw new Error(\n              'Cannot script an SVG in an \"img\" element. Please use an \"object\" element or an in-line SVG.'\n            );\n          } else {\n            throw new Error(\"Cannot get SVG.\");\n          }\n          return null;\n        }\n      }\n    }\n\n    return svg;\n  },\n\n  /**\n   * Attach a given context to a function\n   * @param  {Function} fn      Function\n   * @param  {Object}   context Context\n   * @return {Function}           Function with certain context\n   */\n  proxy: function(fn, context) {\n    return function() {\n      return fn.apply(context, arguments);\n    };\n  },\n\n  /**\n   * Returns object type\n   * Uses toString that returns [object SVGPoint]\n   * And than parses object type from string\n   *\n   * @param  {Object} o Any object\n   * @return {String}   Object type\n   */\n  getType: function(o) {\n    return Object.prototype.toString\n      .apply(o)\n      .replace(/^\\[object\\s/, \"\")\n      .replace(/\\]$/, \"\");\n  },\n\n  /**\n   * If it is a touch event than add clientX and clientY to event object\n   *\n   * @param  {Event} evt\n   * @param  {SVGSVGElement} svg\n   */\n  mouseAndTouchNormalize: function(evt, svg) {\n    // If no clientX then fallback\n    if (evt.clientX === void 0 || evt.clientX === null) {\n      // Fallback\n      evt.clientX = 0;\n      evt.clientY = 0;\n\n      // If it is a touch event\n      if (evt.touches !== void 0 && evt.touches.length) {\n        if (evt.touches[0].clientX !== void 0) {\n          evt.clientX = evt.touches[0].clientX;\n          evt.clientY = evt.touches[0].clientY;\n        } else if (evt.touches[0].pageX !== void 0) {\n          var rect = svg.getBoundingClientRect();\n\n          evt.clientX = evt.touches[0].pageX - rect.left;\n          evt.clientY = evt.touches[0].pageY - rect.top;\n        }\n        // If it is a custom event\n      } else if (evt.originalEvent !== void 0) {\n        if (evt.originalEvent.clientX !== void 0) {\n          evt.clientX = evt.originalEvent.clientX;\n          evt.clientY = evt.originalEvent.clientY;\n        }\n      }\n    }\n  },\n\n  /**\n   * Check if an event is a double click/tap\n   * TODO: For touch gestures use a library (hammer.js) that takes in account other events\n   * (touchmove and touchend). It should take in account tap duration and traveled distance\n   *\n   * @param  {Event}  evt\n   * @param  {Event}  prevEvt Previous Event\n   * @return {Boolean}\n   */\n  isDblClick: function(evt, prevEvt) {\n    // Double click detected by browser\n    if (evt.detail === 2) {\n      return true;\n    }\n    // Try to compare events\n    else if (prevEvt !== void 0 && prevEvt !== null) {\n      var timeStampDiff = evt.timeStamp - prevEvt.timeStamp, // should be lower than 250 ms\n        touchesDistance = Math.sqrt(\n          Math.pow(evt.clientX - prevEvt.clientX, 2) +\n            Math.pow(evt.clientY - prevEvt.clientY, 2)\n        );\n\n      return timeStampDiff < 250 && touchesDistance < 10;\n    }\n\n    // Nothing found\n    return false;\n  },\n\n  /**\n   * Returns current timestamp as an integer\n   *\n   * @return {Number}\n   */\n  now:\n    Date.now ||\n    function() {\n      return new Date().getTime();\n    },\n\n  // From underscore.\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  throttle: function(func, wait, options) {\n    var that = this;\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) {\n      options = {};\n    }\n    var later = function() {\n      previous = options.leading === false ? 0 : that.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) {\n        context = args = null;\n      }\n    };\n    return function() {\n      var now = that.now();\n      if (!previous && options.leading === false) {\n        previous = now;\n      }\n      var remaining = wait - (now - previous);\n      context = this; // eslint-disable-line consistent-this\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        clearTimeout(timeout);\n        timeout = null;\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) {\n          context = args = null;\n        }\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  },\n\n  /**\n   * Create a requestAnimationFrame simulation\n   *\n   * @param  {Number|String} refreshRate\n   * @return {Function}\n   */\n  createRequestAnimationFrame: function(refreshRate) {\n    var timeout = null;\n\n    // Convert refreshRate to timeout\n    if (refreshRate !== \"auto\" && refreshRate < 60 && refreshRate > 1) {\n      timeout = Math.floor(1000 / refreshRate);\n    }\n\n    if (timeout === null) {\n      return window.requestAnimationFrame || requestTimeout(33);\n    } else {\n      return requestTimeout(timeout);\n    }\n  }\n};\n\n/**\n * Create a callback that will execute after a given timeout\n *\n * @param  {Function} timeout\n * @return {Function}\n */\nfunction requestTimeout(timeout) {\n  return function(callback) {\n    window.setTimeout(callback, timeout);\n  };\n}\n","'use strict';\n\n(function () {\n  var out$ = typeof exports != 'undefined' && exports || typeof define != 'undefined' && {} || this || window;\n  if (typeof define !== 'undefined') define('save-svg-as-png', [], function () {\n    return out$;\n  });\n  out$.default = out$;\n\n  var xmlNs = 'http://www.w3.org/2000/xmlns/';\n  var xhtmlNs = 'http://www.w3.org/1999/xhtml';\n  var svgNs = 'http://www.w3.org/2000/svg';\n  var doctype = '<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\" [<!ENTITY nbsp \"&#160;\">]>';\n  var urlRegex = /url\\([\"']?(.+?)[\"']?\\)/;\n  var fontFormats = {\n    woff2: 'font/woff2',\n    woff: 'font/woff',\n    otf: 'application/x-font-opentype',\n    ttf: 'application/x-font-ttf',\n    eot: 'application/vnd.ms-fontobject',\n    sfnt: 'application/font-sfnt',\n    svg: 'image/svg+xml'\n  };\n\n  var isElement = function isElement(obj) {\n    return obj instanceof HTMLElement || obj instanceof SVGElement;\n  };\n  var requireDomNode = function requireDomNode(el) {\n    if (!isElement(el)) throw new Error('an HTMLElement or SVGElement is required; got ' + el);\n  };\n  var requireDomNodePromise = function requireDomNodePromise(el) {\n    return new Promise(function (resolve, reject) {\n      if (isElement(el)) resolve(el);else reject(new Error('an HTMLElement or SVGElement is required; got ' + el));\n    });\n  };\n  var isExternal = function isExternal(url) {\n    return url && url.lastIndexOf('http', 0) === 0 && url.lastIndexOf(window.location.host) === -1;\n  };\n\n  var getFontMimeTypeFromUrl = function getFontMimeTypeFromUrl(fontUrl) {\n    var formats = Object.keys(fontFormats).filter(function (extension) {\n      return fontUrl.indexOf('.' + extension) > 0;\n    }).map(function (extension) {\n      return fontFormats[extension];\n    });\n    if (formats) return formats[0];\n    console.error('Unknown font format for ' + fontUrl + '. Fonts may not be working correctly.');\n    return 'application/octet-stream';\n  };\n\n  var arrayBufferToBase64 = function arrayBufferToBase64(buffer) {\n    var binary = '';\n    var bytes = new Uint8Array(buffer);\n    for (var i = 0; i < bytes.byteLength; i++) {\n      binary += String.fromCharCode(bytes[i]);\n    }return window.btoa(binary);\n  };\n\n  var getDimension = function getDimension(el, clone, dim) {\n    var v = el.viewBox && el.viewBox.baseVal && el.viewBox.baseVal[dim] || clone.getAttribute(dim) !== null && !clone.getAttribute(dim).match(/%$/) && parseInt(clone.getAttribute(dim)) || el.getBoundingClientRect()[dim] || parseInt(clone.style[dim]) || parseInt(window.getComputedStyle(el).getPropertyValue(dim));\n    return typeof v === 'undefined' || v === null || isNaN(parseFloat(v)) ? 0 : v;\n  };\n\n  var getDimensions = function getDimensions(el, clone, width, height) {\n    if (el.tagName === 'svg') return {\n      width: width || getDimension(el, clone, 'width'),\n      height: height || getDimension(el, clone, 'height')\n    };else if (el.getBBox) {\n      var _el$getBBox = el.getBBox(),\n          x = _el$getBBox.x,\n          y = _el$getBBox.y,\n          _width = _el$getBBox.width,\n          _height = _el$getBBox.height;\n\n      return {\n        width: x + _width,\n        height: y + _height\n      };\n    }\n  };\n\n  var reEncode = function reEncode(data) {\n    return decodeURIComponent(encodeURIComponent(data).replace(/%([0-9A-F]{2})/g, function (match, p1) {\n      var c = String.fromCharCode('0x' + p1);\n      return c === '%' ? '%25' : c;\n    }));\n  };\n\n  var uriToBlob = function uriToBlob(uri) {\n    var byteString = window.atob(uri.split(',')[1]);\n    var mimeString = uri.split(',')[0].split(':')[1].split(';')[0];\n    var buffer = new ArrayBuffer(byteString.length);\n    var intArray = new Uint8Array(buffer);\n    for (var i = 0; i < byteString.length; i++) {\n      intArray[i] = byteString.charCodeAt(i);\n    }\n    return new Blob([buffer], { type: mimeString });\n  };\n\n  var query = function query(el, selector) {\n    if (!selector) return;\n    try {\n      return el.querySelector(selector) || el.parentNode && el.parentNode.querySelector(selector);\n    } catch (err) {\n      console.warn('Invalid CSS selector \"' + selector + '\"', err);\n    }\n  };\n\n  var detectCssFont = function detectCssFont(rule, href) {\n    // Match CSS font-face rules to external links.\n    // @font-face {\n    //   src: local('Abel'), url(https://fonts.gstatic.com/s/abel/v6/UzN-iejR1VoXU2Oc-7LsbvesZW2xOQ-xsNqO47m55DA.woff2);\n    // }\n    var match = rule.cssText.match(urlRegex);\n    var url = match && match[1] || '';\n    if (!url || url.match(/^data:/) || url === 'about:blank') return;\n    var fullUrl = url.startsWith('../') ? href + '/../' + url : url.startsWith('./') ? href + '/.' + url : url;\n    return {\n      text: rule.cssText,\n      format: getFontMimeTypeFromUrl(fullUrl),\n      url: fullUrl\n    };\n  };\n\n  var inlineImages = function inlineImages(el) {\n    return Promise.all(Array.from(el.querySelectorAll('image')).map(function (image) {\n      var href = image.getAttributeNS('http://www.w3.org/1999/xlink', 'href') || image.getAttribute('href');\n      if (!href) return Promise.resolve(null);\n      if (isExternal(href)) {\n        href += (href.indexOf('?') === -1 ? '?' : '&') + 't=' + new Date().valueOf();\n      }\n      return new Promise(function (resolve, reject) {\n        var canvas = document.createElement('canvas');\n        var img = new Image();\n        img.crossOrigin = 'anonymous';\n        img.src = href;\n        img.onerror = function () {\n          return reject(new Error('Could not load ' + href));\n        };\n        img.onload = function () {\n          canvas.width = img.width;\n          canvas.height = img.height;\n          canvas.getContext('2d').drawImage(img, 0, 0);\n          image.setAttributeNS('http://www.w3.org/1999/xlink', 'href', canvas.toDataURL('image/png'));\n          resolve(true);\n        };\n      });\n    }));\n  };\n\n  var cachedFonts = {};\n  var inlineFonts = function inlineFonts(fonts) {\n    return Promise.all(fonts.map(function (font) {\n      return new Promise(function (resolve, reject) {\n        if (cachedFonts[font.url]) return resolve(cachedFonts[font.url]);\n\n        var req = new XMLHttpRequest();\n        req.addEventListener('load', function () {\n          // TODO: it may also be worth it to wait until fonts are fully loaded before\n          // attempting to rasterize them. (e.g. use https://developer.mozilla.org/en-US/docs/Web/API/FontFaceSet)\n          var fontInBase64 = arrayBufferToBase64(req.response);\n          var fontUri = font.text.replace(urlRegex, 'url(\"data:' + font.format + ';base64,' + fontInBase64 + '\")') + '\\n';\n          cachedFonts[font.url] = fontUri;\n          resolve(fontUri);\n        });\n        req.addEventListener('error', function (e) {\n          console.warn('Failed to load font from: ' + font.url, e);\n          cachedFonts[font.url] = null;\n          resolve(null);\n        });\n        req.addEventListener('abort', function (e) {\n          console.warn('Aborted loading font from: ' + font.url, e);\n          resolve(null);\n        });\n        req.open('GET', font.url);\n        req.responseType = 'arraybuffer';\n        req.send();\n      });\n    })).then(function (fontCss) {\n      return fontCss.filter(function (x) {\n        return x;\n      }).join('');\n    });\n  };\n\n  var cachedRules = null;\n  var styleSheetRules = function styleSheetRules() {\n    if (cachedRules) return cachedRules;\n    return cachedRules = Array.from(document.styleSheets).map(function (sheet) {\n      try {\n        return { rules: sheet.cssRules, href: sheet.href };\n      } catch (e) {\n        console.warn('Stylesheet could not be loaded: ' + sheet.href, e);\n        return {};\n      }\n    });\n  };\n\n  var inlineCss = function inlineCss(el, options) {\n    var _ref = options || {},\n        selectorRemap = _ref.selectorRemap,\n        modifyStyle = _ref.modifyStyle,\n        modifyCss = _ref.modifyCss,\n        fonts = _ref.fonts,\n        excludeUnusedCss = _ref.excludeUnusedCss;\n\n    var generateCss = modifyCss || function (selector, properties) {\n      var sel = selectorRemap ? selectorRemap(selector) : selector;\n      var props = modifyStyle ? modifyStyle(properties) : properties;\n      return sel + '{' + props + '}\\n';\n    };\n    var css = [];\n    var detectFonts = typeof fonts === 'undefined';\n    var fontList = fonts || [];\n    styleSheetRules().forEach(function (_ref2) {\n      var rules = _ref2.rules,\n          href = _ref2.href;\n\n      if (!rules) return;\n      Array.from(rules).forEach(function (rule) {\n        if (typeof rule.style != 'undefined') {\n          if (query(el, rule.selectorText)) css.push(generateCss(rule.selectorText, rule.style.cssText));else if (detectFonts && rule.cssText.match(/^@font-face/)) {\n            var font = detectCssFont(rule, href);\n            if (font) fontList.push(font);\n          } else if (!excludeUnusedCss) {\n            css.push(rule.cssText);\n          }\n        }\n      });\n    });\n\n    return inlineFonts(fontList).then(function (fontCss) {\n      return css.join('\\n') + fontCss;\n    });\n  };\n\n  var downloadOptions = function downloadOptions() {\n    if (!navigator.msSaveOrOpenBlob && !('download' in document.createElement('a'))) {\n      return { popup: window.open() };\n    }\n  };\n\n  out$.prepareSvg = function (el, options, done) {\n    requireDomNode(el);\n\n    var _ref3 = options || {},\n        _ref3$left = _ref3.left,\n        left = _ref3$left === undefined ? 0 : _ref3$left,\n        _ref3$top = _ref3.top,\n        top = _ref3$top === undefined ? 0 : _ref3$top,\n        w = _ref3.width,\n        h = _ref3.height,\n        _ref3$scale = _ref3.scale,\n        scale = _ref3$scale === undefined ? 1 : _ref3$scale,\n        _ref3$responsive = _ref3.responsive,\n        responsive = _ref3$responsive === undefined ? false : _ref3$responsive,\n        _ref3$excludeCss = _ref3.excludeCss,\n        excludeCss = _ref3$excludeCss === undefined ? false : _ref3$excludeCss;\n\n    return inlineImages(el).then(function () {\n      var clone = el.cloneNode(true);\n      clone.style.backgroundColor = (options || {}).backgroundColor || el.style.backgroundColor;\n\n      var _getDimensions = getDimensions(el, clone, w, h),\n          width = _getDimensions.width,\n          height = _getDimensions.height;\n\n      if (el.tagName !== 'svg') {\n        if (el.getBBox) {\n          if (clone.getAttribute('transform') != null) {\n            clone.setAttribute('transform', clone.getAttribute('transform').replace(/translate\\(.*?\\)/, ''));\n          }\n          var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n          svg.appendChild(clone);\n          clone = svg;\n        } else {\n          console.error('Attempted to render non-SVG element', el);\n          return;\n        }\n      }\n\n      clone.setAttribute('version', '1.1');\n      clone.setAttribute('viewBox', [left, top, width, height].join(' '));\n      if (!clone.getAttribute('xmlns')) clone.setAttributeNS(xmlNs, 'xmlns', svgNs);\n      if (!clone.getAttribute('xmlns:xlink')) clone.setAttributeNS(xmlNs, 'xmlns:xlink', 'http://www.w3.org/1999/xlink');\n\n      if (responsive) {\n        clone.removeAttribute('width');\n        clone.removeAttribute('height');\n        clone.setAttribute('preserveAspectRatio', 'xMinYMin meet');\n      } else {\n        clone.setAttribute('width', width * scale);\n        clone.setAttribute('height', height * scale);\n      }\n\n      Array.from(clone.querySelectorAll('foreignObject > *')).forEach(function (foreignObject) {\n        foreignObject.setAttributeNS(xmlNs, 'xmlns', foreignObject.tagName === 'svg' ? svgNs : xhtmlNs);\n      });\n\n      if (excludeCss) {\n        var outer = document.createElement('div');\n        outer.appendChild(clone);\n        var src = outer.innerHTML;\n        if (typeof done === 'function') done(src, width, height);else return { src: src, width: width, height: height };\n      } else {\n        return inlineCss(el, options).then(function (css) {\n          var style = document.createElement('style');\n          style.setAttribute('type', 'text/css');\n          style.innerHTML = '<![CDATA[\\n' + css + '\\n]]>';\n\n          var defs = document.createElement('defs');\n          defs.appendChild(style);\n          clone.insertBefore(defs, clone.firstChild);\n\n          var outer = document.createElement('div');\n          outer.appendChild(clone);\n          var src = outer.innerHTML.replace(/NS\\d+:href/gi, 'xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href');\n\n          if (typeof done === 'function') done(src, width, height);else return { src: src, width: width, height: height };\n        });\n      }\n    });\n  };\n\n  out$.svgAsDataUri = function (el, options, done) {\n    requireDomNode(el);\n    return out$.prepareSvg(el, options).then(function (_ref4) {\n      var src = _ref4.src,\n          width = _ref4.width,\n          height = _ref4.height;\n\n      var svgXml = 'data:image/svg+xml;base64,' + window.btoa(reEncode(doctype + src));\n      if (typeof done === 'function') {\n        done(svgXml, width, height);\n      }\n      return svgXml;\n    });\n  };\n\n  out$.svgAsPngUri = function (el, options, done) {\n    requireDomNode(el);\n\n    var _ref5 = options || {},\n        _ref5$encoderType = _ref5.encoderType,\n        encoderType = _ref5$encoderType === undefined ? 'image/png' : _ref5$encoderType,\n        _ref5$encoderOptions = _ref5.encoderOptions,\n        encoderOptions = _ref5$encoderOptions === undefined ? 0.8 : _ref5$encoderOptions,\n        canvg = _ref5.canvg;\n\n    var convertToPng = function convertToPng(_ref6) {\n      var src = _ref6.src,\n          width = _ref6.width,\n          height = _ref6.height;\n\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      var pixelRatio = window.devicePixelRatio || 1;\n\n      canvas.width = width * pixelRatio;\n      canvas.height = height * pixelRatio;\n      canvas.style.width = canvas.width + 'px';\n      canvas.style.height = canvas.height + 'px';\n      context.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n\n      if (canvg) canvg(canvas, src);else context.drawImage(src, 0, 0);\n\n      var png = void 0;\n      try {\n        png = canvas.toDataURL(encoderType, encoderOptions);\n      } catch (e) {\n        if (typeof SecurityError !== 'undefined' && e instanceof SecurityError || e.name === 'SecurityError') {\n          console.error('Rendered SVG images cannot be downloaded in this browser.');\n          return;\n        } else throw e;\n      }\n      if (typeof done === 'function') done(png, canvas.width, canvas.height);\n      return Promise.resolve(png);\n    };\n\n    if (canvg) return out$.prepareSvg(el, options).then(convertToPng);else return out$.svgAsDataUri(el, options).then(function (uri) {\n      return new Promise(function (resolve, reject) {\n        var image = new Image();\n        image.onload = function () {\n          return resolve(convertToPng({\n            src: image,\n            width: image.width,\n            height: image.height\n          }));\n        };\n        image.onerror = function () {\n          reject('There was an error loading the data URI as an image on the following SVG\\n' + window.atob(uri.slice(26)) + 'Open the following link to see browser\\'s diagnosis\\n' + uri);\n        };\n        image.src = uri;\n      });\n    });\n  };\n\n  out$.download = function (name, uri, options) {\n    if (navigator.msSaveOrOpenBlob) navigator.msSaveOrOpenBlob(uriToBlob(uri), name);else {\n      var saveLink = document.createElement('a');\n      if ('download' in saveLink) {\n        saveLink.download = name;\n        saveLink.style.display = 'none';\n        document.body.appendChild(saveLink);\n        try {\n          var blob = uriToBlob(uri);\n          var url = URL.createObjectURL(blob);\n          saveLink.href = url;\n          saveLink.onclick = function () {\n            return requestAnimationFrame(function () {\n              return URL.revokeObjectURL(url);\n            });\n          };\n        } catch (e) {\n          console.error(e);\n          console.warn('Error while getting object URL. Falling back to string URL.');\n          saveLink.href = uri;\n        }\n        saveLink.click();\n        document.body.removeChild(saveLink);\n      } else if (options && options.popup) {\n        options.popup.document.title = name;\n        options.popup.location.replace(uri);\n      }\n    }\n  };\n\n  out$.saveSvg = function (el, name, options) {\n    var downloadOpts = downloadOptions(); // don't inline, can't be async\n    return requireDomNodePromise(el).then(function (el) {\n      return out$.svgAsDataUri(el, options || {});\n    }).then(function (uri) {\n      return out$.download(name, uri, downloadOpts);\n    });\n  };\n\n  out$.saveSvgAsPng = function (el, name, options) {\n    var downloadOpts = downloadOptions(); // don't inline, can't be async\n    return requireDomNodePromise(el).then(function (el) {\n      return out$.svgAsPngUri(el, options || {});\n    }).then(function (uri) {\n      return out$.download(name, uri, downloadOpts);\n    });\n  };\n})();","// uniwheel 0.1.2 (customized)\n// A unified cross browser mouse wheel event handler\n// https://github.com/teemualap/uniwheel\n\nmodule.exports = (function(){\n\n  //Full details: https://developer.mozilla.org/en-US/docs/Web/Reference/Events/wheel\n\n  var prefix = \"\", _addEventListener, _removeEventListener, support, fns = [];\n  var passiveListenerOption = {passive: true};\n  var activeListenerOption = {passive: false};\n\n  // detect event model\n  if ( window.addEventListener ) {\n    _addEventListener = \"addEventListener\";\n    _removeEventListener = \"removeEventListener\";\n  } else {\n    _addEventListener = \"attachEvent\";\n    _removeEventListener = \"detachEvent\";\n    prefix = \"on\";\n  }\n\n  // detect available wheel event\n  support = \"onwheel\" in document.createElement(\"div\") ? \"wheel\" : // Modern browsers support \"wheel\"\n            document.onmousewheel !== undefined ? \"mousewheel\" : // Webkit and IE support at least \"mousewheel\"\n            \"DOMMouseScroll\"; // let's assume that remaining browsers are older Firefox\n\n\n  function createCallback(element,callback) {\n\n    var fn = function(originalEvent) {\n\n      !originalEvent && ( originalEvent = window.event );\n\n      // create a normalized event object\n      var event = {\n        // keep a ref to the original event object\n        originalEvent: originalEvent,\n        target: originalEvent.target || originalEvent.srcElement,\n        type: \"wheel\",\n        deltaMode: originalEvent.type == \"MozMousePixelScroll\" ? 0 : 1,\n        deltaX: 0,\n        delatZ: 0,\n        preventDefault: function() {\n          originalEvent.preventDefault ?\n            originalEvent.preventDefault() :\n            originalEvent.returnValue = false;\n        }\n      };\n\n      // calculate deltaY (and deltaX) according to the event\n      if ( support == \"mousewheel\" ) {\n        event.deltaY = - 1/40 * originalEvent.wheelDelta;\n        // Webkit also support wheelDeltaX\n        originalEvent.wheelDeltaX && ( event.deltaX = - 1/40 * originalEvent.wheelDeltaX );\n      } else {\n        event.deltaY = originalEvent.detail;\n      }\n\n      // it's time to fire the callback\n      return callback( event );\n\n    };\n\n    fns.push({\n      element: element,\n      fn: fn,\n    });\n\n    return fn;\n  }\n\n  function getCallback(element) {\n    for (var i = 0; i < fns.length; i++) {\n      if (fns[i].element === element) {\n        return fns[i].fn;\n      }\n    }\n    return function(){};\n  }\n\n  function removeCallback(element) {\n    for (var i = 0; i < fns.length; i++) {\n      if (fns[i].element === element) {\n        return fns.splice(i,1);\n      }\n    }\n  }\n\n  function _addWheelListener(elem, eventName, callback, isPassiveListener ) {\n    var cb;\n\n    if (support === \"wheel\") {\n      cb = callback;\n    } else {\n      cb = createCallback(elem, callback);\n    }\n\n    elem[_addEventListener](\n      prefix + eventName,\n      cb,\n      isPassiveListener ? passiveListenerOption : activeListenerOption\n    );\n  }\n\n  function _removeWheelListener(elem, eventName, callback, isPassiveListener ) {\n\n    var cb;\n\n    if (support === \"wheel\") {\n      cb = callback;\n    } else {\n      cb = getCallback(elem);\n    }\n\n    elem[_removeEventListener](\n      prefix + eventName,\n      cb,\n      isPassiveListener ? passiveListenerOption : activeListenerOption\n    );\n\n    removeCallback(elem);\n  }\n\n  function addWheelListener( elem, callback, isPassiveListener ) {\n    _addWheelListener(elem, support, callback, isPassiveListener );\n\n    // handle MozMousePixelScroll in older Firefox\n    if( support == \"DOMMouseScroll\" ) {\n      _addWheelListener(elem, \"MozMousePixelScroll\", callback, isPassiveListener );\n    }\n  }\n\n  function removeWheelListener(elem, callback, isPassiveListener){\n    _removeWheelListener(elem, support, callback, isPassiveListener);\n\n    // handle MozMousePixelScroll in older Firefox\n    if( support == \"DOMMouseScroll\" ) {\n      _removeWheelListener(elem, \"MozMousePixelScroll\", callback, isPassiveListener);\n    }\n  }\n\n  return {\n    on: addWheelListener,\n    off: removeWheelListener\n  };\n\n})();\n","var Utils = require(\"./utilities\"),\n  _browser = \"unknown\";\n\n// http://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\nif (/*@cc_on!@*/ false || !!document.documentMode) {\n  // internet explorer\n  _browser = \"ie\";\n}\n\nmodule.exports = {\n  svgNS: \"http://www.w3.org/2000/svg\",\n  xmlNS: \"http://www.w3.org/XML/1998/namespace\",\n  xmlnsNS: \"http://www.w3.org/2000/xmlns/\",\n  xlinkNS: \"http://www.w3.org/1999/xlink\",\n  evNS: \"http://www.w3.org/2001/xml-events\",\n\n  /**\n   * Get svg dimensions: width and height\n   *\n   * @param  {SVGSVGElement} svg\n   * @return {Object}     {width: 0, height: 0}\n   */\n  getBoundingClientRectNormalized: function(svg) {\n    if (svg.clientWidth && svg.clientHeight) {\n      return { width: svg.clientWidth, height: svg.clientHeight };\n    } else if (!!svg.getBoundingClientRect()) {\n      return svg.getBoundingClientRect();\n    } else {\n      throw new Error(\"Cannot get BoundingClientRect for SVG.\");\n    }\n  },\n\n  /**\n   * Gets g element with class of \"viewport\" or creates it if it doesn't exist\n   *\n   * @param  {SVGSVGElement} svg\n   * @return {SVGElement}     g (group) element\n   */\n  getOrCreateViewport: function(svg, selector) {\n    var viewport = null;\n\n    if (Utils.isElement(selector)) {\n      viewport = selector;\n    } else {\n      viewport = svg.querySelector(selector);\n    }\n\n    // Check if there is just one main group in SVG\n    if (!viewport) {\n      var childNodes = Array.prototype.slice\n        .call(svg.childNodes || svg.children)\n        .filter(function(el) {\n          return el.nodeName !== \"defs\" && el.nodeName !== \"#text\";\n        });\n\n      // Node name should be SVGGElement and should have no transform attribute\n      // Groups with transform are not used as viewport because it involves parsing of all transform possibilities\n      if (\n        childNodes.length === 1 &&\n        childNodes[0].nodeName === \"g\" &&\n        childNodes[0].getAttribute(\"transform\") === null\n      ) {\n        viewport = childNodes[0];\n      }\n    }\n\n    // If no favorable group element exists then create one\n    if (!viewport) {\n      var viewportId =\n        \"viewport-\" + new Date().toISOString().replace(/\\D/g, \"\");\n      viewport = document.createElementNS(this.svgNS, \"g\");\n      viewport.setAttribute(\"id\", viewportId);\n\n      // Internet Explorer (all versions?) can't use childNodes, but other browsers prefer (require?) using childNodes\n      var svgChildren = svg.childNodes || svg.children;\n      if (!!svgChildren && svgChildren.length > 0) {\n        for (var i = svgChildren.length; i > 0; i--) {\n          // Move everything into viewport except defs\n          if (svgChildren[svgChildren.length - i].nodeName !== \"defs\") {\n            viewport.appendChild(svgChildren[svgChildren.length - i]);\n          }\n        }\n      }\n      svg.appendChild(viewport);\n    }\n\n    // Parse class names\n    var classNames = [];\n    if (viewport.getAttribute(\"class\")) {\n      classNames = viewport.getAttribute(\"class\").split(\" \");\n    }\n\n    // Set class (if not set already)\n    if (!~classNames.indexOf(\"svg-pan-zoom_viewport\")) {\n      classNames.push(\"svg-pan-zoom_viewport\");\n      viewport.setAttribute(\"class\", classNames.join(\" \"));\n    }\n\n    return viewport;\n  },\n\n  /**\n   * Set SVG attributes\n   *\n   * @param  {SVGSVGElement} svg\n   */\n  setupSvgAttributes: function(svg) {\n    // Setting default attributes\n    svg.setAttribute(\"xmlns\", this.svgNS);\n    svg.setAttributeNS(this.xmlnsNS, \"xmlns:xlink\", this.xlinkNS);\n    svg.setAttributeNS(this.xmlnsNS, \"xmlns:ev\", this.evNS);\n\n    // Needed for Internet Explorer, otherwise the viewport overflows\n    if (svg.parentNode !== null) {\n      var style = svg.getAttribute(\"style\") || \"\";\n      if (style.toLowerCase().indexOf(\"overflow\") === -1) {\n        svg.setAttribute(\"style\", \"overflow: hidden; \" + style);\n      }\n    }\n  },\n\n  /**\n   * How long Internet Explorer takes to finish updating its display (ms).\n   */\n  internetExplorerRedisplayInterval: 300,\n\n  /**\n   * Forces the browser to redisplay all SVG elements that rely on an\n   * element defined in a 'defs' section. It works globally, for every\n   * available defs element on the page.\n   * The throttling is intentionally global.\n   *\n   * This is only needed for IE. It is as a hack to make markers (and 'use' elements?)\n   * visible after pan/zoom when there are multiple SVGs on the page.\n   * See bug report: https://connect.microsoft.com/IE/feedback/details/781964/\n   * also see svg-pan-zoom issue: https://github.com/bumbu/svg-pan-zoom/issues/62\n   */\n  refreshDefsGlobal: Utils.throttle(\n    function() {\n      var allDefs = document.querySelectorAll(\"defs\");\n      var allDefsCount = allDefs.length;\n      for (var i = 0; i < allDefsCount; i++) {\n        var thisDefs = allDefs[i];\n        thisDefs.parentNode.insertBefore(thisDefs, thisDefs);\n      }\n    },\n    this ? this.internetExplorerRedisplayInterval : null\n  ),\n\n  /**\n   * Sets the current transform matrix of an element\n   *\n   * @param {SVGElement} element\n   * @param {SVGMatrix} matrix  CTM\n   * @param {SVGElement} defs\n   */\n  setCTM: function(element, matrix, defs) {\n    var that = this,\n      s =\n        \"matrix(\" +\n        matrix.a +\n        \",\" +\n        matrix.b +\n        \",\" +\n        matrix.c +\n        \",\" +\n        matrix.d +\n        \",\" +\n        matrix.e +\n        \",\" +\n        matrix.f +\n        \")\";\n\n    element.setAttributeNS(null, \"transform\", s);\n    if (\"transform\" in element.style) {\n      element.style.transform = s;\n    } else if (\"-ms-transform\" in element.style) {\n      element.style[\"-ms-transform\"] = s;\n    } else if (\"-webkit-transform\" in element.style) {\n      element.style[\"-webkit-transform\"] = s;\n    }\n\n    // IE has a bug that makes markers disappear on zoom (when the matrix \"a\" and/or \"d\" elements change)\n    // see http://stackoverflow.com/questions/17654578/svg-marker-does-not-work-in-ie9-10\n    // and http://srndolha.wordpress.com/2013/11/25/svg-line-markers-may-disappear-in-internet-explorer-11/\n    if (_browser === \"ie\" && !!defs) {\n      // this refresh is intended for redisplaying the SVG during zooming\n      defs.parentNode.insertBefore(defs, defs);\n      // this refresh is intended for redisplaying the other SVGs on a page when panning a given SVG\n      // it is also needed for the given SVG itself, on zoomEnd, if the SVG contains any markers that\n      // are located under any other element(s).\n      window.setTimeout(function() {\n        that.refreshDefsGlobal();\n      }, that.internetExplorerRedisplayInterval);\n    }\n  },\n\n  /**\n   * Instantiate an SVGPoint object with given event coordinates\n   *\n   * @param {Event} evt\n   * @param  {SVGSVGElement} svg\n   * @return {SVGPoint}     point\n   */\n  getEventPoint: function(evt, svg) {\n    var point = svg.createSVGPoint();\n\n    Utils.mouseAndTouchNormalize(evt, svg);\n\n    point.x = evt.clientX;\n    point.y = evt.clientY;\n\n    return point;\n  },\n\n  /**\n   * Get SVG center point\n   *\n   * @param  {SVGSVGElement} svg\n   * @return {SVGPoint}\n   */\n  getSvgCenterPoint: function(svg, width, height) {\n    return this.createSVGPoint(svg, width / 2, height / 2);\n  },\n\n  /**\n   * Create a SVGPoint with given x and y\n   *\n   * @param  {SVGSVGElement} svg\n   * @param  {Number} x\n   * @param  {Number} y\n   * @return {SVGPoint}\n   */\n  createSVGPoint: function(svg, x, y) {\n    var point = svg.createSVGPoint();\n    point.x = x;\n    point.y = y;\n\n    return point;\n  }\n};\n","var Wheel = require(\"./uniwheel\"),\n  ControlIcons = require(\"./control-icons\"),\n  Utils = require(\"./utilities\"),\n  SvgUtils = require(\"./svg-utilities\"),\n  ShadowViewport = require(\"./shadow-viewport\");\n\nvar SvgPanZoom = function(svg, options) {\n  this.init(svg, options);\n};\n\nvar optionsDefaults = {\n  viewportSelector: \".svg-pan-zoom_viewport\", // Viewport selector. Can be querySelector string or SVGElement\n  panEnabled: true, // enable or disable panning (default enabled)\n  controlIconsEnabled: false, // insert icons to give user an option in addition to mouse events to control pan/zoom (default disabled)\n  zoomEnabled: true, // enable or disable zooming (default enabled)\n  dblClickZoomEnabled: true, // enable or disable zooming by double clicking (default enabled)\n  mouseWheelZoomEnabled: true, // enable or disable zooming by mouse wheel (default enabled)\n  preventMouseEventsDefault: true, // enable or disable preventDefault for mouse events\n  zoomScaleSensitivity: 0.1, // Zoom sensitivity\n  minZoom: 0.5, // Minimum Zoom level\n  maxZoom: 10, // Maximum Zoom level\n  fit: true, // enable or disable viewport fit in SVG (default true)\n  contain: false, // enable or disable viewport contain the svg (default false)\n  center: true, // enable or disable viewport centering in SVG (default true)\n  refreshRate: \"auto\", // Maximum number of frames per second (altering SVG's viewport)\n  beforeZoom: null,\n  onZoom: null,\n  beforePan: null,\n  onPan: null,\n  customEventsHandler: null,\n  eventsListenerElement: null,\n  onUpdatedCTM: null\n};\n\nvar passiveListenerOption = { passive: true };\n\nSvgPanZoom.prototype.init = function(svg, options) {\n  var that = this;\n\n  this.svg = svg;\n  this.defs = svg.querySelector(\"defs\");\n\n  // Add default attributes to SVG\n  SvgUtils.setupSvgAttributes(this.svg);\n\n  // Set options\n  this.options = Utils.extend(Utils.extend({}, optionsDefaults), options);\n\n  // Set default state\n  this.state = \"none\";\n\n  // Get dimensions\n  var boundingClientRectNormalized = SvgUtils.getBoundingClientRectNormalized(\n    svg\n  );\n  this.width = boundingClientRectNormalized.width;\n  this.height = boundingClientRectNormalized.height;\n\n  // Init shadow viewport\n  this.viewport = ShadowViewport(\n    SvgUtils.getOrCreateViewport(this.svg, this.options.viewportSelector),\n    {\n      svg: this.svg,\n      width: this.width,\n      height: this.height,\n      fit: this.options.fit,\n      contain: this.options.contain,\n      center: this.options.center,\n      refreshRate: this.options.refreshRate,\n      // Put callbacks into functions as they can change through time\n      beforeZoom: function(oldScale, newScale) {\n        if (that.viewport && that.options.beforeZoom) {\n          return that.options.beforeZoom(oldScale, newScale);\n        }\n      },\n      onZoom: function(scale) {\n        if (that.viewport && that.options.onZoom) {\n          return that.options.onZoom(scale);\n        }\n      },\n      beforePan: function(oldPoint, newPoint) {\n        if (that.viewport && that.options.beforePan) {\n          return that.options.beforePan(oldPoint, newPoint);\n        }\n      },\n      onPan: function(point) {\n        if (that.viewport && that.options.onPan) {\n          return that.options.onPan(point);\n        }\n      },\n      onUpdatedCTM: function(ctm) {\n        if (that.viewport && that.options.onUpdatedCTM) {\n          return that.options.onUpdatedCTM(ctm);\n        }\n      }\n    }\n  );\n\n  // Wrap callbacks into public API context\n  var publicInstance = this.getPublicInstance();\n  publicInstance.setBeforeZoom(this.options.beforeZoom);\n  publicInstance.setOnZoom(this.options.onZoom);\n  publicInstance.setBeforePan(this.options.beforePan);\n  publicInstance.setOnPan(this.options.onPan);\n  publicInstance.setOnUpdatedCTM(this.options.onUpdatedCTM);\n\n  if (this.options.controlIconsEnabled) {\n    ControlIcons.enable(this);\n  }\n\n  // Init events handlers\n  this.lastMouseWheelEventTime = Date.now();\n  this.setupHandlers();\n};\n\n/**\n * Register event handlers\n */\nSvgPanZoom.prototype.setupHandlers = function() {\n  var that = this,\n    prevEvt = null; // use for touchstart event to detect double tap\n\n  this.eventListeners = {\n    // Mouse down group\n    mousedown: function(evt) {\n      var result = that.handleMouseDown(evt, prevEvt);\n      prevEvt = evt;\n      return result;\n    },\n    touchstart: function(evt) {\n      var result = that.handleMouseDown(evt, prevEvt);\n      prevEvt = evt;\n      return result;\n    },\n\n    // Mouse up group\n    mouseup: function(evt) {\n      return that.handleMouseUp(evt);\n    },\n    touchend: function(evt) {\n      return that.handleMouseUp(evt);\n    },\n\n    // Mouse move group\n    mousemove: function(evt) {\n      return that.handleMouseMove(evt);\n    },\n    touchmove: function(evt) {\n      return that.handleMouseMove(evt);\n    },\n\n    // Mouse leave group\n    mouseleave: function(evt) {\n      return that.handleMouseUp(evt);\n    },\n    touchleave: function(evt) {\n      return that.handleMouseUp(evt);\n    },\n    touchcancel: function(evt) {\n      return that.handleMouseUp(evt);\n    }\n  };\n\n  // Init custom events handler if available\n  // eslint-disable-next-line eqeqeq\n  if (this.options.customEventsHandler != null) {\n    this.options.customEventsHandler.init({\n      svgElement: this.svg,\n      eventsListenerElement: this.options.eventsListenerElement,\n      instance: this.getPublicInstance()\n    });\n\n    // Custom event handler may halt builtin listeners\n    var haltEventListeners = this.options.customEventsHandler\n      .haltEventListeners;\n    if (haltEventListeners && haltEventListeners.length) {\n      for (var i = haltEventListeners.length - 1; i >= 0; i--) {\n        if (this.eventListeners.hasOwnProperty(haltEventListeners[i])) {\n          delete this.eventListeners[haltEventListeners[i]];\n        }\n      }\n    }\n  }\n\n  // Bind eventListeners\n  for (var event in this.eventListeners) {\n    // Attach event to eventsListenerElement or SVG if not available\n    (this.options.eventsListenerElement || this.svg).addEventListener(\n      event,\n      this.eventListeners[event],\n      !this.options.preventMouseEventsDefault ? passiveListenerOption : false\n    );\n  }\n\n  // Zoom using mouse wheel\n  if (this.options.mouseWheelZoomEnabled) {\n    this.options.mouseWheelZoomEnabled = false; // set to false as enable will set it back to true\n    this.enableMouseWheelZoom();\n  }\n};\n\n/**\n * Enable ability to zoom using mouse wheel\n */\nSvgPanZoom.prototype.enableMouseWheelZoom = function() {\n  if (!this.options.mouseWheelZoomEnabled) {\n    var that = this;\n\n    // Mouse wheel listener\n    this.wheelListener = function(evt) {\n      return that.handleMouseWheel(evt);\n    };\n\n    // Bind wheelListener\n    var isPassiveListener = !this.options.preventMouseEventsDefault;\n    Wheel.on(\n      this.options.eventsListenerElement || this.svg,\n      this.wheelListener,\n      isPassiveListener\n    );\n\n    this.options.mouseWheelZoomEnabled = true;\n  }\n};\n\n/**\n * Disable ability to zoom using mouse wheel\n */\nSvgPanZoom.prototype.disableMouseWheelZoom = function() {\n  if (this.options.mouseWheelZoomEnabled) {\n    var isPassiveListener = !this.options.preventMouseEventsDefault;\n    Wheel.off(\n      this.options.eventsListenerElement || this.svg,\n      this.wheelListener,\n      isPassiveListener\n    );\n    this.options.mouseWheelZoomEnabled = false;\n  }\n};\n\n/**\n * Handle mouse wheel event\n *\n * @param  {Event} evt\n */\nSvgPanZoom.prototype.handleMouseWheel = function(evt) {\n  if (!this.options.zoomEnabled || this.state !== \"none\") {\n    return;\n  }\n\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } else {\n      evt.returnValue = false;\n    }\n  }\n\n  // Default delta in case that deltaY is not available\n  var delta = evt.deltaY || 1,\n    timeDelta = Date.now() - this.lastMouseWheelEventTime,\n    divider = 3 + Math.max(0, 30 - timeDelta);\n\n  // Update cache\n  this.lastMouseWheelEventTime = Date.now();\n\n  // Make empirical adjustments for browsers that give deltaY in pixels (deltaMode=0)\n  if (\"deltaMode\" in evt && evt.deltaMode === 0 && evt.wheelDelta) {\n    delta = evt.deltaY === 0 ? 0 : Math.abs(evt.wheelDelta) / evt.deltaY;\n  }\n\n  delta =\n    -0.3 < delta && delta < 0.3\n      ? delta\n      : ((delta > 0 ? 1 : -1) * Math.log(Math.abs(delta) + 10)) / divider;\n\n  var inversedScreenCTM = this.svg.getScreenCTM().inverse(),\n    relativeMousePoint = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(\n      inversedScreenCTM\n    ),\n    zoom = Math.pow(1 + this.options.zoomScaleSensitivity, -1 * delta); // multiplying by neg. 1 so as to make zoom in/out behavior match Google maps behavior\n\n  this.zoomAtPoint(zoom, relativeMousePoint);\n};\n\n/**\n * Zoom in at a SVG point\n *\n * @param  {SVGPoint} point\n * @param  {Float} zoomScale    Number representing how much to zoom\n * @param  {Boolean} zoomAbsolute Default false. If true, zoomScale is treated as an absolute value.\n *                                Otherwise, zoomScale is treated as a multiplied (e.g. 1.10 would zoom in 10%)\n */\nSvgPanZoom.prototype.zoomAtPoint = function(zoomScale, point, zoomAbsolute) {\n  var originalState = this.viewport.getOriginalState();\n\n  if (!zoomAbsolute) {\n    // Fit zoomScale in set bounds\n    if (\n      this.getZoom() * zoomScale <\n      this.options.minZoom * originalState.zoom\n    ) {\n      zoomScale = (this.options.minZoom * originalState.zoom) / this.getZoom();\n    } else if (\n      this.getZoom() * zoomScale >\n      this.options.maxZoom * originalState.zoom\n    ) {\n      zoomScale = (this.options.maxZoom * originalState.zoom) / this.getZoom();\n    }\n  } else {\n    // Fit zoomScale in set bounds\n    zoomScale = Math.max(\n      this.options.minZoom * originalState.zoom,\n      Math.min(this.options.maxZoom * originalState.zoom, zoomScale)\n    );\n    // Find relative scale to achieve desired scale\n    zoomScale = zoomScale / this.getZoom();\n  }\n\n  var oldCTM = this.viewport.getCTM(),\n    relativePoint = point.matrixTransform(oldCTM.inverse()),\n    modifier = this.svg\n      .createSVGMatrix()\n      .translate(relativePoint.x, relativePoint.y)\n      .scale(zoomScale)\n      .translate(-relativePoint.x, -relativePoint.y),\n    newCTM = oldCTM.multiply(modifier);\n\n  if (newCTM.a !== oldCTM.a) {\n    this.viewport.setCTM(newCTM);\n  }\n};\n\n/**\n * Zoom at center point\n *\n * @param  {Float} scale\n * @param  {Boolean} absolute Marks zoom scale as relative or absolute\n */\nSvgPanZoom.prototype.zoom = function(scale, absolute) {\n  this.zoomAtPoint(\n    scale,\n    SvgUtils.getSvgCenterPoint(this.svg, this.width, this.height),\n    absolute\n  );\n};\n\n/**\n * Zoom used by public instance\n *\n * @param  {Float} scale\n * @param  {Boolean} absolute Marks zoom scale as relative or absolute\n */\nSvgPanZoom.prototype.publicZoom = function(scale, absolute) {\n  if (absolute) {\n    scale = this.computeFromRelativeZoom(scale);\n  }\n\n  this.zoom(scale, absolute);\n};\n\n/**\n * Zoom at point used by public instance\n *\n * @param  {Float} scale\n * @param  {SVGPoint|Object} point    An object that has x and y attributes\n * @param  {Boolean} absolute Marks zoom scale as relative or absolute\n */\nSvgPanZoom.prototype.publicZoomAtPoint = function(scale, point, absolute) {\n  if (absolute) {\n    // Transform zoom into a relative value\n    scale = this.computeFromRelativeZoom(scale);\n  }\n\n  // If not a SVGPoint but has x and y then create a SVGPoint\n  if (Utils.getType(point) !== \"SVGPoint\") {\n    if (\"x\" in point && \"y\" in point) {\n      point = SvgUtils.createSVGPoint(this.svg, point.x, point.y);\n    } else {\n      throw new Error(\"Given point is invalid\");\n    }\n  }\n\n  this.zoomAtPoint(scale, point, absolute);\n};\n\n/**\n * Get zoom scale\n *\n * @return {Float} zoom scale\n */\nSvgPanZoom.prototype.getZoom = function() {\n  return this.viewport.getZoom();\n};\n\n/**\n * Get zoom scale for public usage\n *\n * @return {Float} zoom scale\n */\nSvgPanZoom.prototype.getRelativeZoom = function() {\n  return this.viewport.getRelativeZoom();\n};\n\n/**\n * Compute actual zoom from public zoom\n *\n * @param  {Float} zoom\n * @return {Float} zoom scale\n */\nSvgPanZoom.prototype.computeFromRelativeZoom = function(zoom) {\n  return zoom * this.viewport.getOriginalState().zoom;\n};\n\n/**\n * Set zoom to initial state\n */\nSvgPanZoom.prototype.resetZoom = function() {\n  var originalState = this.viewport.getOriginalState();\n\n  this.zoom(originalState.zoom, true);\n};\n\n/**\n * Set pan to initial state\n */\nSvgPanZoom.prototype.resetPan = function() {\n  this.pan(this.viewport.getOriginalState());\n};\n\n/**\n * Set pan and zoom to initial state\n */\nSvgPanZoom.prototype.reset = function() {\n  this.resetZoom();\n  this.resetPan();\n};\n\n/**\n * Handle double click event\n * See handleMouseDown() for alternate detection method\n *\n * @param {Event} evt\n */\nSvgPanZoom.prototype.handleDblClick = function(evt) {\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } else {\n      evt.returnValue = false;\n    }\n  }\n\n  // Check if target was a control button\n  if (this.options.controlIconsEnabled) {\n    var targetClass = evt.target.getAttribute(\"class\") || \"\";\n    if (targetClass.indexOf(\"svg-pan-zoom-control\") > -1) {\n      return false;\n    }\n  }\n\n  var zoomFactor;\n\n  if (evt.shiftKey) {\n    zoomFactor = 1 / ((1 + this.options.zoomScaleSensitivity) * 2); // zoom out when shift key pressed\n  } else {\n    zoomFactor = (1 + this.options.zoomScaleSensitivity) * 2;\n  }\n\n  var point = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(\n    this.svg.getScreenCTM().inverse()\n  );\n  this.zoomAtPoint(zoomFactor, point);\n};\n\n/**\n * Handle click event\n *\n * @param {Event} evt\n */\nSvgPanZoom.prototype.handleMouseDown = function(evt, prevEvt) {\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } else {\n      evt.returnValue = false;\n    }\n  }\n\n  Utils.mouseAndTouchNormalize(evt, this.svg);\n\n  // Double click detection; more consistent than ondblclick\n  if (this.options.dblClickZoomEnabled && Utils.isDblClick(evt, prevEvt)) {\n    this.handleDblClick(evt);\n  } else {\n    // Pan mode\n    this.state = \"pan\";\n    this.firstEventCTM = this.viewport.getCTM();\n    this.stateOrigin = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(\n      this.firstEventCTM.inverse()\n    );\n  }\n};\n\n/**\n * Handle mouse move event\n *\n * @param  {Event} evt\n */\nSvgPanZoom.prototype.handleMouseMove = function(evt) {\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } else {\n      evt.returnValue = false;\n    }\n  }\n\n  if (this.state === \"pan\" && this.options.panEnabled) {\n    // Pan mode\n    var point = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(\n        this.firstEventCTM.inverse()\n      ),\n      viewportCTM = this.firstEventCTM.translate(\n        point.x - this.stateOrigin.x,\n        point.y - this.stateOrigin.y\n      );\n\n    this.viewport.setCTM(viewportCTM);\n  }\n};\n\n/**\n * Handle mouse button release event\n *\n * @param {Event} evt\n */\nSvgPanZoom.prototype.handleMouseUp = function(evt) {\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } else {\n      evt.returnValue = false;\n    }\n  }\n\n  if (this.state === \"pan\") {\n    // Quit pan mode\n    this.state = \"none\";\n  }\n};\n\n/**\n * Adjust viewport size (only) so it will fit in SVG\n * Does not center image\n */\nSvgPanZoom.prototype.fit = function() {\n  var viewBox = this.viewport.getViewBox(),\n    newScale = Math.min(\n      this.width / viewBox.width,\n      this.height / viewBox.height\n    );\n\n  this.zoom(newScale, true);\n};\n\n/**\n * Adjust viewport size (only) so it will contain the SVG\n * Does not center image\n */\nSvgPanZoom.prototype.contain = function() {\n  var viewBox = this.viewport.getViewBox(),\n    newScale = Math.max(\n      this.width / viewBox.width,\n      this.height / viewBox.height\n    );\n\n  this.zoom(newScale, true);\n};\n\n/**\n * Adjust viewport pan (only) so it will be centered in SVG\n * Does not zoom/fit/contain image\n */\nSvgPanZoom.prototype.center = function() {\n  var viewBox = this.viewport.getViewBox(),\n    offsetX =\n      (this.width - (viewBox.width + viewBox.x * 2) * this.getZoom()) * 0.5,\n    offsetY =\n      (this.height - (viewBox.height + viewBox.y * 2) * this.getZoom()) * 0.5;\n\n  this.getPublicInstance().pan({ x: offsetX, y: offsetY });\n};\n\n/**\n * Update content cached BorderBox\n * Use when viewport contents change\n */\nSvgPanZoom.prototype.updateBBox = function() {\n  this.viewport.simpleViewBoxCache();\n};\n\n/**\n * Pan to a rendered position\n *\n * @param  {Object} point {x: 0, y: 0}\n */\nSvgPanZoom.prototype.pan = function(point) {\n  var viewportCTM = this.viewport.getCTM();\n  viewportCTM.e = point.x;\n  viewportCTM.f = point.y;\n  this.viewport.setCTM(viewportCTM);\n};\n\n/**\n * Relatively pan the graph by a specified rendered position vector\n *\n * @param  {Object} point {x: 0, y: 0}\n */\nSvgPanZoom.prototype.panBy = function(point) {\n  var viewportCTM = this.viewport.getCTM();\n  viewportCTM.e += point.x;\n  viewportCTM.f += point.y;\n  this.viewport.setCTM(viewportCTM);\n};\n\n/**\n * Get pan vector\n *\n * @return {Object} {x: 0, y: 0}\n */\nSvgPanZoom.prototype.getPan = function() {\n  var state = this.viewport.getState();\n\n  return { x: state.x, y: state.y };\n};\n\n/**\n * Recalculates cached svg dimensions and controls position\n */\nSvgPanZoom.prototype.resize = function() {\n  // Get dimensions\n  var boundingClientRectNormalized = SvgUtils.getBoundingClientRectNormalized(\n    this.svg\n  );\n  this.width = boundingClientRectNormalized.width;\n  this.height = boundingClientRectNormalized.height;\n\n  // Recalculate original state\n  var viewport = this.viewport;\n  viewport.options.width = this.width;\n  viewport.options.height = this.height;\n  viewport.processCTM();\n\n  // Reposition control icons by re-enabling them\n  if (this.options.controlIconsEnabled) {\n    this.getPublicInstance().disableControlIcons();\n    this.getPublicInstance().enableControlIcons();\n  }\n};\n\n/**\n * Unbind mouse events, free callbacks and destroy public instance\n */\nSvgPanZoom.prototype.destroy = function() {\n  var that = this;\n\n  // Free callbacks\n  this.beforeZoom = null;\n  this.onZoom = null;\n  this.beforePan = null;\n  this.onPan = null;\n  this.onUpdatedCTM = null;\n\n  // Destroy custom event handlers\n  // eslint-disable-next-line eqeqeq\n  if (this.options.customEventsHandler != null) {\n    this.options.customEventsHandler.destroy({\n      svgElement: this.svg,\n      eventsListenerElement: this.options.eventsListenerElement,\n      instance: this.getPublicInstance()\n    });\n  }\n\n  // Unbind eventListeners\n  for (var event in this.eventListeners) {\n    (this.options.eventsListenerElement || this.svg).removeEventListener(\n      event,\n      this.eventListeners[event],\n      !this.options.preventMouseEventsDefault ? passiveListenerOption : false\n    );\n  }\n\n  // Unbind wheelListener\n  this.disableMouseWheelZoom();\n\n  // Remove control icons\n  this.getPublicInstance().disableControlIcons();\n\n  // Reset zoom and pan\n  this.reset();\n\n  // Remove instance from instancesStore\n  instancesStore = instancesStore.filter(function(instance) {\n    return instance.svg !== that.svg;\n  });\n\n  // Delete options and its contents\n  delete this.options;\n\n  // Delete viewport to make public shadow viewport functions uncallable\n  delete this.viewport;\n\n  // Destroy public instance and rewrite getPublicInstance\n  delete this.publicInstance;\n  delete this.pi;\n  this.getPublicInstance = function() {\n    return null;\n  };\n};\n\n/**\n * Returns a public instance object\n *\n * @return {Object} Public instance object\n */\nSvgPanZoom.prototype.getPublicInstance = function() {\n  var that = this;\n\n  // Create cache\n  if (!this.publicInstance) {\n    this.publicInstance = this.pi = {\n      // Pan\n      enablePan: function() {\n        that.options.panEnabled = true;\n        return that.pi;\n      },\n      disablePan: function() {\n        that.options.panEnabled = false;\n        return that.pi;\n      },\n      isPanEnabled: function() {\n        return !!that.options.panEnabled;\n      },\n      pan: function(point) {\n        that.pan(point);\n        return that.pi;\n      },\n      panBy: function(point) {\n        that.panBy(point);\n        return that.pi;\n      },\n      getPan: function() {\n        return that.getPan();\n      },\n      // Pan event\n      setBeforePan: function(fn) {\n        that.options.beforePan =\n          fn === null ? null : Utils.proxy(fn, that.publicInstance);\n        return that.pi;\n      },\n      setOnPan: function(fn) {\n        that.options.onPan =\n          fn === null ? null : Utils.proxy(fn, that.publicInstance);\n        return that.pi;\n      },\n      // Zoom and Control Icons\n      enableZoom: function() {\n        that.options.zoomEnabled = true;\n        return that.pi;\n      },\n      disableZoom: function() {\n        that.options.zoomEnabled = false;\n        return that.pi;\n      },\n      isZoomEnabled: function() {\n        return !!that.options.zoomEnabled;\n      },\n      enableControlIcons: function() {\n        if (!that.options.controlIconsEnabled) {\n          that.options.controlIconsEnabled = true;\n          ControlIcons.enable(that);\n        }\n        return that.pi;\n      },\n      disableControlIcons: function() {\n        if (that.options.controlIconsEnabled) {\n          that.options.controlIconsEnabled = false;\n          ControlIcons.disable(that);\n        }\n        return that.pi;\n      },\n      isControlIconsEnabled: function() {\n        return !!that.options.controlIconsEnabled;\n      },\n      // Double click zoom\n      enableDblClickZoom: function() {\n        that.options.dblClickZoomEnabled = true;\n        return that.pi;\n      },\n      disableDblClickZoom: function() {\n        that.options.dblClickZoomEnabled = false;\n        return that.pi;\n      },\n      isDblClickZoomEnabled: function() {\n        return !!that.options.dblClickZoomEnabled;\n      },\n      // Mouse wheel zoom\n      enableMouseWheelZoom: function() {\n        that.enableMouseWheelZoom();\n        return that.pi;\n      },\n      disableMouseWheelZoom: function() {\n        that.disableMouseWheelZoom();\n        return that.pi;\n      },\n      isMouseWheelZoomEnabled: function() {\n        return !!that.options.mouseWheelZoomEnabled;\n      },\n      // Zoom scale and bounds\n      setZoomScaleSensitivity: function(scale) {\n        that.options.zoomScaleSensitivity = scale;\n        return that.pi;\n      },\n      setMinZoom: function(zoom) {\n        that.options.minZoom = zoom;\n        return that.pi;\n      },\n      setMaxZoom: function(zoom) {\n        that.options.maxZoom = zoom;\n        return that.pi;\n      },\n      // Zoom event\n      setBeforeZoom: function(fn) {\n        that.options.beforeZoom =\n          fn === null ? null : Utils.proxy(fn, that.publicInstance);\n        return that.pi;\n      },\n      setOnZoom: function(fn) {\n        that.options.onZoom =\n          fn === null ? null : Utils.proxy(fn, that.publicInstance);\n        return that.pi;\n      },\n      // Zooming\n      zoom: function(scale) {\n        that.publicZoom(scale, true);\n        return that.pi;\n      },\n      zoomBy: function(scale) {\n        that.publicZoom(scale, false);\n        return that.pi;\n      },\n      zoomAtPoint: function(scale, point) {\n        that.publicZoomAtPoint(scale, point, true);\n        return that.pi;\n      },\n      zoomAtPointBy: function(scale, point) {\n        that.publicZoomAtPoint(scale, point, false);\n        return that.pi;\n      },\n      zoomIn: function() {\n        this.zoomBy(1 + that.options.zoomScaleSensitivity);\n        return that.pi;\n      },\n      zoomOut: function() {\n        this.zoomBy(1 / (1 + that.options.zoomScaleSensitivity));\n        return that.pi;\n      },\n      getZoom: function() {\n        return that.getRelativeZoom();\n      },\n      // CTM update\n      setOnUpdatedCTM: function(fn) {\n        that.options.onUpdatedCTM =\n          fn === null ? null : Utils.proxy(fn, that.publicInstance);\n        return that.pi;\n      },\n      // Reset\n      resetZoom: function() {\n        that.resetZoom();\n        return that.pi;\n      },\n      resetPan: function() {\n        that.resetPan();\n        return that.pi;\n      },\n      reset: function() {\n        that.reset();\n        return that.pi;\n      },\n      // Fit, Contain and Center\n      fit: function() {\n        that.fit();\n        return that.pi;\n      },\n      contain: function() {\n        that.contain();\n        return that.pi;\n      },\n      center: function() {\n        that.center();\n        return that.pi;\n      },\n      // Size and Resize\n      updateBBox: function() {\n        that.updateBBox();\n        return that.pi;\n      },\n      resize: function() {\n        that.resize();\n        return that.pi;\n      },\n      getSizes: function() {\n        return {\n          width: that.width,\n          height: that.height,\n          realZoom: that.getZoom(),\n          viewBox: that.viewport.getViewBox()\n        };\n      },\n      // Destroy\n      destroy: function() {\n        that.destroy();\n        return that.pi;\n      }\n    };\n  }\n\n  return this.publicInstance;\n};\n\n/**\n * Stores pairs of instances of SvgPanZoom and SVG\n * Each pair is represented by an object {svg: SVGSVGElement, instance: SvgPanZoom}\n *\n * @type {Array}\n */\nvar instancesStore = [];\n\nvar svgPanZoom = function(elementOrSelector, options) {\n  var svg = Utils.getSvg(elementOrSelector);\n\n  if (svg === null) {\n    return null;\n  } else {\n    // Look for existent instance\n    for (var i = instancesStore.length - 1; i >= 0; i--) {\n      if (instancesStore[i].svg === svg) {\n        return instancesStore[i].instance.getPublicInstance();\n      }\n    }\n\n    // If instance not found - create one\n    instancesStore.push({\n      svg: svg,\n      instance: new SvgPanZoom(svg, options)\n    });\n\n    // Return just pushed instance\n    return instancesStore[\n      instancesStore.length - 1\n    ].instance.getPublicInstance();\n  }\n};\n\nmodule.exports = svgPanZoom;\n","var SvgPanZoom = require(\"./svg-pan-zoom.js\");\n\nmodule.exports = SvgPanZoom;\n","var SvgUtils = require(\"./svg-utilities\"),\n  Utils = require(\"./utilities\");\n\nvar ShadowViewport = function(viewport, options) {\n  this.init(viewport, options);\n};\n\n/**\n * Initialization\n *\n * @param  {SVGElement} viewport\n * @param  {Object} options\n */\nShadowViewport.prototype.init = function(viewport, options) {\n  // DOM Elements\n  this.viewport = viewport;\n  this.options = options;\n\n  // State cache\n  this.originalState = { zoom: 1, x: 0, y: 0 };\n  this.activeState = { zoom: 1, x: 0, y: 0 };\n\n  this.updateCTMCached = Utils.proxy(this.updateCTM, this);\n\n  // Create a custom requestAnimationFrame taking in account refreshRate\n  this.requestAnimationFrame = Utils.createRequestAnimationFrame(\n    this.options.refreshRate\n  );\n\n  // ViewBox\n  this.viewBox = { x: 0, y: 0, width: 0, height: 0 };\n  this.cacheViewBox();\n\n  // Process CTM\n  var newCTM = this.processCTM();\n\n  // Update viewport CTM and cache zoom and pan\n  this.setCTM(newCTM);\n\n  // Update CTM in this frame\n  this.updateCTM();\n};\n\n/**\n * Cache initial viewBox value\n * If no viewBox is defined, then use viewport size/position instead for viewBox values\n */\nShadowViewport.prototype.cacheViewBox = function() {\n  var svgViewBox = this.options.svg.getAttribute(\"viewBox\");\n\n  if (svgViewBox) {\n    var viewBoxValues = svgViewBox\n      .split(/[\\s\\,]/)\n      .filter(function(v) {\n        return v;\n      })\n      .map(parseFloat);\n\n    // Cache viewbox x and y offset\n    this.viewBox.x = viewBoxValues[0];\n    this.viewBox.y = viewBoxValues[1];\n    this.viewBox.width = viewBoxValues[2];\n    this.viewBox.height = viewBoxValues[3];\n\n    var zoom = Math.min(\n      this.options.width / this.viewBox.width,\n      this.options.height / this.viewBox.height\n    );\n\n    // Update active state\n    this.activeState.zoom = zoom;\n    this.activeState.x = (this.options.width - this.viewBox.width * zoom) / 2;\n    this.activeState.y = (this.options.height - this.viewBox.height * zoom) / 2;\n\n    // Force updating CTM\n    this.updateCTMOnNextFrame();\n\n    this.options.svg.removeAttribute(\"viewBox\");\n  } else {\n    this.simpleViewBoxCache();\n  }\n};\n\n/**\n * Recalculate viewport sizes and update viewBox cache\n */\nShadowViewport.prototype.simpleViewBoxCache = function() {\n  var bBox = this.viewport.getBBox();\n\n  this.viewBox.x = bBox.x;\n  this.viewBox.y = bBox.y;\n  this.viewBox.width = bBox.width;\n  this.viewBox.height = bBox.height;\n};\n\n/**\n * Returns a viewbox object. Safe to alter\n *\n * @return {Object} viewbox object\n */\nShadowViewport.prototype.getViewBox = function() {\n  return Utils.extend({}, this.viewBox);\n};\n\n/**\n * Get initial zoom and pan values. Save them into originalState\n * Parses viewBox attribute to alter initial sizes\n *\n * @return {CTM} CTM object based on options\n */\nShadowViewport.prototype.processCTM = function() {\n  var newCTM = this.getCTM();\n\n  if (this.options.fit || this.options.contain) {\n    var newScale;\n    if (this.options.fit) {\n      newScale = Math.min(\n        this.options.width / this.viewBox.width,\n        this.options.height / this.viewBox.height\n      );\n    } else {\n      newScale = Math.max(\n        this.options.width / this.viewBox.width,\n        this.options.height / this.viewBox.height\n      );\n    }\n\n    newCTM.a = newScale; //x-scale\n    newCTM.d = newScale; //y-scale\n    newCTM.e = -this.viewBox.x * newScale; //x-transform\n    newCTM.f = -this.viewBox.y * newScale; //y-transform\n  }\n\n  if (this.options.center) {\n    var offsetX =\n        (this.options.width -\n          (this.viewBox.width + this.viewBox.x * 2) * newCTM.a) *\n        0.5,\n      offsetY =\n        (this.options.height -\n          (this.viewBox.height + this.viewBox.y * 2) * newCTM.a) *\n        0.5;\n\n    newCTM.e = offsetX;\n    newCTM.f = offsetY;\n  }\n\n  // Cache initial values. Based on activeState and fix+center opitons\n  this.originalState.zoom = newCTM.a;\n  this.originalState.x = newCTM.e;\n  this.originalState.y = newCTM.f;\n\n  return newCTM;\n};\n\n/**\n * Return originalState object. Safe to alter\n *\n * @return {Object}\n */\nShadowViewport.prototype.getOriginalState = function() {\n  return Utils.extend({}, this.originalState);\n};\n\n/**\n * Return actualState object. Safe to alter\n *\n * @return {Object}\n */\nShadowViewport.prototype.getState = function() {\n  return Utils.extend({}, this.activeState);\n};\n\n/**\n * Get zoom scale\n *\n * @return {Float} zoom scale\n */\nShadowViewport.prototype.getZoom = function() {\n  return this.activeState.zoom;\n};\n\n/**\n * Get zoom scale for pubilc usage\n *\n * @return {Float} zoom scale\n */\nShadowViewport.prototype.getRelativeZoom = function() {\n  return this.activeState.zoom / this.originalState.zoom;\n};\n\n/**\n * Compute zoom scale for pubilc usage\n *\n * @return {Float} zoom scale\n */\nShadowViewport.prototype.computeRelativeZoom = function(scale) {\n  return scale / this.originalState.zoom;\n};\n\n/**\n * Get pan\n *\n * @return {Object}\n */\nShadowViewport.prototype.getPan = function() {\n  return { x: this.activeState.x, y: this.activeState.y };\n};\n\n/**\n * Return cached viewport CTM value that can be safely modified\n *\n * @return {SVGMatrix}\n */\nShadowViewport.prototype.getCTM = function() {\n  var safeCTM = this.options.svg.createSVGMatrix();\n\n  // Copy values manually as in FF they are not itterable\n  safeCTM.a = this.activeState.zoom;\n  safeCTM.b = 0;\n  safeCTM.c = 0;\n  safeCTM.d = this.activeState.zoom;\n  safeCTM.e = this.activeState.x;\n  safeCTM.f = this.activeState.y;\n\n  return safeCTM;\n};\n\n/**\n * Set a new CTM\n *\n * @param {SVGMatrix} newCTM\n */\nShadowViewport.prototype.setCTM = function(newCTM) {\n  var willZoom = this.isZoomDifferent(newCTM),\n    willPan = this.isPanDifferent(newCTM);\n\n  if (willZoom || willPan) {\n    // Before zoom\n    if (willZoom) {\n      // If returns false then cancel zooming\n      if (\n        this.options.beforeZoom(\n          this.getRelativeZoom(),\n          this.computeRelativeZoom(newCTM.a)\n        ) === false\n      ) {\n        newCTM.a = newCTM.d = this.activeState.zoom;\n        willZoom = false;\n      } else {\n        this.updateCache(newCTM);\n        this.options.onZoom(this.getRelativeZoom());\n      }\n    }\n\n    // Before pan\n    if (willPan) {\n      var preventPan = this.options.beforePan(this.getPan(), {\n          x: newCTM.e,\n          y: newCTM.f\n        }),\n        // If prevent pan is an object\n        preventPanX = false,\n        preventPanY = false;\n\n      // If prevent pan is Boolean false\n      if (preventPan === false) {\n        // Set x and y same as before\n        newCTM.e = this.getPan().x;\n        newCTM.f = this.getPan().y;\n\n        preventPanX = preventPanY = true;\n      } else if (Utils.isObject(preventPan)) {\n        // Check for X axes attribute\n        if (preventPan.x === false) {\n          // Prevent panning on x axes\n          newCTM.e = this.getPan().x;\n          preventPanX = true;\n        } else if (Utils.isNumber(preventPan.x)) {\n          // Set a custom pan value\n          newCTM.e = preventPan.x;\n        }\n\n        // Check for Y axes attribute\n        if (preventPan.y === false) {\n          // Prevent panning on x axes\n          newCTM.f = this.getPan().y;\n          preventPanY = true;\n        } else if (Utils.isNumber(preventPan.y)) {\n          // Set a custom pan value\n          newCTM.f = preventPan.y;\n        }\n      }\n\n      // Update willPan flag\n      // Check if newCTM is still different\n      if ((preventPanX && preventPanY) || !this.isPanDifferent(newCTM)) {\n        willPan = false;\n      } else {\n        this.updateCache(newCTM);\n        this.options.onPan(this.getPan());\n      }\n    }\n\n    // Check again if should zoom or pan\n    if (willZoom || willPan) {\n      this.updateCTMOnNextFrame();\n    }\n  }\n};\n\nShadowViewport.prototype.isZoomDifferent = function(newCTM) {\n  return this.activeState.zoom !== newCTM.a;\n};\n\nShadowViewport.prototype.isPanDifferent = function(newCTM) {\n  return this.activeState.x !== newCTM.e || this.activeState.y !== newCTM.f;\n};\n\n/**\n * Update cached CTM and active state\n *\n * @param {SVGMatrix} newCTM\n */\nShadowViewport.prototype.updateCache = function(newCTM) {\n  this.activeState.zoom = newCTM.a;\n  this.activeState.x = newCTM.e;\n  this.activeState.y = newCTM.f;\n};\n\nShadowViewport.prototype.pendingUpdate = false;\n\n/**\n * Place a request to update CTM on next Frame\n */\nShadowViewport.prototype.updateCTMOnNextFrame = function() {\n  if (!this.pendingUpdate) {\n    // Lock\n    this.pendingUpdate = true;\n\n    // Throttle next update\n    this.requestAnimationFrame.call(window, this.updateCTMCached);\n  }\n};\n\n/**\n * Update viewport CTM with cached CTM\n */\nShadowViewport.prototype.updateCTM = function() {\n  var ctm = this.getCTM();\n\n  // Updates SVG element\n  SvgUtils.setCTM(this.viewport, ctm, this.defs);\n\n  // Free the lock\n  this.pendingUpdate = false;\n\n  // Notify about the update\n  if (this.options.onUpdatedCTM) {\n    this.options.onUpdatedCTM(ctm);\n  }\n};\n\nmodule.exports = function(viewport, options) {\n  return new ShadowViewport(viewport, options);\n};\n","var SvgUtils = require(\"./svg-utilities\");\n\nmodule.exports = {\n  enable: function(instance) {\n    // Select (and create if necessary) defs\n    var defs = instance.svg.querySelector(\"defs\");\n    if (!defs) {\n      defs = document.createElementNS(SvgUtils.svgNS, \"defs\");\n      instance.svg.appendChild(defs);\n    }\n\n    // Check for style element, and create it if it doesn't exist\n    var styleEl = defs.querySelector(\"style#svg-pan-zoom-controls-styles\");\n    if (!styleEl) {\n      var style = document.createElementNS(SvgUtils.svgNS, \"style\");\n      style.setAttribute(\"id\", \"svg-pan-zoom-controls-styles\");\n      style.setAttribute(\"type\", \"text/css\");\n      style.textContent =\n        \".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }\";\n      defs.appendChild(style);\n    }\n\n    // Zoom Group\n    var zoomGroup = document.createElementNS(SvgUtils.svgNS, \"g\");\n    zoomGroup.setAttribute(\"id\", \"svg-pan-zoom-controls\");\n    zoomGroup.setAttribute(\n      \"transform\",\n      \"translate(\" +\n        (instance.width - 70) +\n        \" \" +\n        (instance.height - 76) +\n        \") scale(0.75)\"\n    );\n    zoomGroup.setAttribute(\"class\", \"svg-pan-zoom-control\");\n\n    // Control elements\n    zoomGroup.appendChild(this._createZoomIn(instance));\n    zoomGroup.appendChild(this._createZoomReset(instance));\n    zoomGroup.appendChild(this._createZoomOut(instance));\n\n    // Finally append created element\n    instance.svg.appendChild(zoomGroup);\n\n    // Cache control instance\n    instance.controlIcons = zoomGroup;\n  },\n\n  _createZoomIn: function(instance) {\n    var zoomIn = document.createElementNS(SvgUtils.svgNS, \"g\");\n    zoomIn.setAttribute(\"id\", \"svg-pan-zoom-zoom-in\");\n    zoomIn.setAttribute(\"transform\", \"translate(30.5 5) scale(0.015)\");\n    zoomIn.setAttribute(\"class\", \"svg-pan-zoom-control\");\n    zoomIn.addEventListener(\n      \"click\",\n      function() {\n        instance.getPublicInstance().zoomIn();\n      },\n      false\n    );\n    zoomIn.addEventListener(\n      \"touchstart\",\n      function() {\n        instance.getPublicInstance().zoomIn();\n      },\n      false\n    );\n\n    var zoomInBackground = document.createElementNS(SvgUtils.svgNS, \"rect\"); // TODO change these background space fillers to rounded rectangles so they look prettier\n    zoomInBackground.setAttribute(\"x\", \"0\");\n    zoomInBackground.setAttribute(\"y\", \"0\");\n    zoomInBackground.setAttribute(\"width\", \"1500\"); // larger than expected because the whole group is transformed to scale down\n    zoomInBackground.setAttribute(\"height\", \"1400\");\n    zoomInBackground.setAttribute(\"class\", \"svg-pan-zoom-control-background\");\n    zoomIn.appendChild(zoomInBackground);\n\n    var zoomInShape = document.createElementNS(SvgUtils.svgNS, \"path\");\n    zoomInShape.setAttribute(\n      \"d\",\n      \"M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z\"\n    );\n    zoomInShape.setAttribute(\"class\", \"svg-pan-zoom-control-element\");\n    zoomIn.appendChild(zoomInShape);\n\n    return zoomIn;\n  },\n\n  _createZoomReset: function(instance) {\n    // reset\n    var resetPanZoomControl = document.createElementNS(SvgUtils.svgNS, \"g\");\n    resetPanZoomControl.setAttribute(\"id\", \"svg-pan-zoom-reset-pan-zoom\");\n    resetPanZoomControl.setAttribute(\"transform\", \"translate(5 35) scale(0.4)\");\n    resetPanZoomControl.setAttribute(\"class\", \"svg-pan-zoom-control\");\n    resetPanZoomControl.addEventListener(\n      \"click\",\n      function() {\n        instance.getPublicInstance().reset();\n      },\n      false\n    );\n    resetPanZoomControl.addEventListener(\n      \"touchstart\",\n      function() {\n        instance.getPublicInstance().reset();\n      },\n      false\n    );\n\n    var resetPanZoomControlBackground = document.createElementNS(\n      SvgUtils.svgNS,\n      \"rect\"\n    ); // TODO change these background space fillers to rounded rectangles so they look prettier\n    resetPanZoomControlBackground.setAttribute(\"x\", \"2\");\n    resetPanZoomControlBackground.setAttribute(\"y\", \"2\");\n    resetPanZoomControlBackground.setAttribute(\"width\", \"182\"); // larger than expected because the whole group is transformed to scale down\n    resetPanZoomControlBackground.setAttribute(\"height\", \"58\");\n    resetPanZoomControlBackground.setAttribute(\n      \"class\",\n      \"svg-pan-zoom-control-background\"\n    );\n    resetPanZoomControl.appendChild(resetPanZoomControlBackground);\n\n    var resetPanZoomControlShape1 = document.createElementNS(\n      SvgUtils.svgNS,\n      \"path\"\n    );\n    resetPanZoomControlShape1.setAttribute(\n      \"d\",\n      \"M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z\"\n    );\n    resetPanZoomControlShape1.setAttribute(\n      \"class\",\n      \"svg-pan-zoom-control-element\"\n    );\n    resetPanZoomControl.appendChild(resetPanZoomControlShape1);\n\n    var resetPanZoomControlShape2 = document.createElementNS(\n      SvgUtils.svgNS,\n      \"path\"\n    );\n    resetPanZoomControlShape2.setAttribute(\n      \"d\",\n      \"M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z\"\n    );\n    resetPanZoomControlShape2.setAttribute(\n      \"class\",\n      \"svg-pan-zoom-control-element\"\n    );\n    resetPanZoomControl.appendChild(resetPanZoomControlShape2);\n\n    return resetPanZoomControl;\n  },\n\n  _createZoomOut: function(instance) {\n    // zoom out\n    var zoomOut = document.createElementNS(SvgUtils.svgNS, \"g\");\n    zoomOut.setAttribute(\"id\", \"svg-pan-zoom-zoom-out\");\n    zoomOut.setAttribute(\"transform\", \"translate(30.5 70) scale(0.015)\");\n    zoomOut.setAttribute(\"class\", \"svg-pan-zoom-control\");\n    zoomOut.addEventListener(\n      \"click\",\n      function() {\n        instance.getPublicInstance().zoomOut();\n      },\n      false\n    );\n    zoomOut.addEventListener(\n      \"touchstart\",\n      function() {\n        instance.getPublicInstance().zoomOut();\n      },\n      false\n    );\n\n    var zoomOutBackground = document.createElementNS(SvgUtils.svgNS, \"rect\"); // TODO change these background space fillers to rounded rectangles so they look prettier\n    zoomOutBackground.setAttribute(\"x\", \"0\");\n    zoomOutBackground.setAttribute(\"y\", \"0\");\n    zoomOutBackground.setAttribute(\"width\", \"1500\"); // larger than expected because the whole group is transformed to scale down\n    zoomOutBackground.setAttribute(\"height\", \"1400\");\n    zoomOutBackground.setAttribute(\"class\", \"svg-pan-zoom-control-background\");\n    zoomOut.appendChild(zoomOutBackground);\n\n    var zoomOutShape = document.createElementNS(SvgUtils.svgNS, \"path\");\n    zoomOutShape.setAttribute(\n      \"d\",\n      \"M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z\"\n    );\n    zoomOutShape.setAttribute(\"class\", \"svg-pan-zoom-control-element\");\n    zoomOut.appendChild(zoomOutShape);\n\n    return zoomOut;\n  },\n\n  disable: function(instance) {\n    if (instance.controlIcons) {\n      instance.controlIcons.parentNode.removeChild(instance.controlIcons);\n      instance.controlIcons = null;\n    }\n  }\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","/*\n This file contains the buttons displayed at the top of the widget\n*/\n\nimport { saveSvgAsPng } from 'save-svg-as-png';\n\n\n// Export function to create a toggle colours button\nexport function createToggleColoursButton(getSvgElement) {\n    const btn = document.createElement('button');\n    btn.classList.add('btn', 'btn-outline-secondary');\n    btn.textContent = 'Toggle colours';\n    btn.title = 'Toggle nucleotide colour';\n\n    let svgColor = true;\n    const colourOn = ['green', 'red', 'blue'];\n    const colourOff = ['ex-green', 'ex-red', 'ex-blue'];\n\n    const toggle = (from, to) => {\n        const svgElement = getSvgElement();\n        if (!svgElement) return;\n        svgElement.querySelectorAll(`.${from}`).forEach(el => {\n            el.classList.remove(from);\n            el.classList.add(to);\n        });\n    };\n\n    btn.addEventListener('click', () => {\n        for (let i = 0; i < colourOn.length; i++) {\n            if (svgColor) {\n                toggle(colourOn[i], colourOff[i]);\n            } else {\n                toggle(colourOff[i], colourOn[i]);\n            }\n        }\n        svgColor = !svgColor;\n    });\n\n    return btn;\n}\n\n// Export function to create a toggle numbers button\nexport function createToggleNumbersButton(getSvgElement) {\n    const btn = document.createElement('button');\n    btn.classList.add('btn', 'btn-outline-secondary');\n    btn.textContent = 'Toggle numbers';\n    btn.title = 'Show/Hide sequence numbers';\n\n    let numbersVisible = true;\n\n    const selectors = [\n        '.numbering-label',\n        '.numbering-line',\n        '.numbering-label.sequential',\n        '.numbering-line.sequential'\n    ];\n\n    btn.addEventListener('click', () => {\n        const svg = getSvgElement();\n        if (!svg) return;\n        selectors.forEach(selector => {\n            svg.querySelectorAll(selector).forEach(el => {\n                el.setAttribute('visibility', numbersVisible ? 'hidden' : 'visible');\n            });\n        });\n        numbersVisible = !numbersVisible;\n    });\n\n    return btn;\n}\n\n// Export function to create a copy dot-bracket notation button\nexport function createCopyDotBracketNotationButton(getSvgElement, dotBracketNotation) {\n    const divDotBracket = document.createElement('div');\n    divDotBracket.style.position = 'relative';\n    divDotBracket.style.display = 'inline-block';\n\n    const btn = document.createElement('button');\n    btn.classList.add('btn', 'btn-outline-secondary');\n    btn.textContent = 'Copy dot-bracket notation';\n    btn.title = 'Copy dot-bracket notation';\n\n    const message = document.createElement('span');\n    message.classList.add('btn-copy-message');\n    message.textContent = 'Copied!';\n    message.style.display = 'none';\n\n    btn.addEventListener('click', async () => {\n        try {\n            await navigator.clipboard.writeText(dotBracketNotation);\n            message.style.display = 'inline';\n            setTimeout(() => {\n                message.style.display = 'none';\n            }, 2000);\n        } catch (err) {\n            console.error('Copy failed:', err);\n        }\n    });\n\n    divDotBracket.appendChild(btn);\n    divDotBracket.appendChild(message);\n\n    return divDotBracket;\n}\n\n// Export function to create a download dropdown button\nexport function createDownloadDropdown(getSvgElement, fileName) {\n    const dropdown = document.createElement('div');\n    dropdown.classList.add('dropdown');\n\n    const toggleBtn = document.createElement('button');\n    toggleBtn.classList.add('btn', 'btn-outline-secondary', 'dropdown-toggle');\n    toggleBtn.textContent = 'Download';\n    toggleBtn.title = 'Download secondary structure';\n\n    const menu = document.createElement('div');\n    menu.classList.add('dropdown-menu');\n\n    // Download as SVG\n    const svgItem = document.createElement('button');\n    svgItem.classList.add('dropdown-item');\n    svgItem.textContent = 'SVG';\n    svgItem.onclick = () => {\n        const svg = getSvgElement();\n        if (!svg) return;\n        const blob = new Blob([svg.outerHTML], { type: 'image/svg+xml;charset=utf-8' });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = `${fileName}.svg`;\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n        URL.revokeObjectURL(url);\n    };\n\n    // Download as PNG\n    const pngItem = document.createElement('button');\n    pngItem.classList.add('dropdown-item');\n    pngItem.textContent = 'PNG';\n    pngItem.onclick = () => {\n        const svg = getSvgElement();\n        if (!svg) return;\n        saveSvgAsPng(svg, `${fileName}.png`, {backgroundColor: 'white', scale: 3});\n    };\n\n    menu.appendChild(svgItem);\n    menu.appendChild(pngItem);\n    dropdown.appendChild(toggleBtn);\n    dropdown.appendChild(menu);\n\n    // Toggle menu visibility\n    toggleBtn.onclick = (e) => {\n        e.stopPropagation();\n        menu.classList.toggle('show');\n    };\n\n    // Close dropdown if clicking outside\n    document.addEventListener('click', (e) => {\n        if (!dropdown.contains(e.target)) {\n            menu.classList.remove('show');\n        }\n    });\n\n    return dropdown;\n}\n\n// Export function to create a panel with all buttons\nexport function createButtonPanel(getSvgElement, fileName, dotBracketNotation) {\n    const panelWrapper = document.createElement('div');\n\n    // Hamburger button\n    const toggleBtn = document.createElement('button');\n    toggleBtn.classList.add('btn', 'btn-outline-secondary', 'menu-toggle');\n    toggleBtn.innerHTML = '&#9776;'; // Hamburger icon\n    toggleBtn.title = 'Menu';\n\n    const btnGroup = document.createElement('div');\n    btnGroup.classList.add('button-panel');\n\n    // Append buttons\n    btnGroup.appendChild(createToggleColoursButton(getSvgElement));\n    btnGroup.appendChild(createToggleNumbersButton(getSvgElement));\n    btnGroup.appendChild(createCopyDotBracketNotationButton(getSvgElement, dotBracketNotation));\n    btnGroup.appendChild(createDownloadDropdown(getSvgElement, fileName));\n\n    toggleBtn.addEventListener('click', () => {\n        btnGroup.classList.toggle('show-buttons');\n    });\n\n    panelWrapper.appendChild(toggleBtn);\n    panelWrapper.appendChild(btnGroup);\n    return panelWrapper;\n}\n","import svgPanZoom from 'svg-pan-zoom';\nimport { createButtonPanel } from './buttons.js';\nimport { r2dtLegend } from './legend.js';\nimport { widgetStyles } from './styles.js';\n\nclass R2DTWidget extends HTMLElement {\n    constructor() {\n        super();\n        this.attachShadow({ mode: 'open' });\n        this.apiDomain = 'https://rnacentral.org/api/v1/rna';\n        this.panZoomInstance = null;\n        this.dotBracketNotation = null;\n        this.injectStyles();\n    }\n\n    connectedCallback() {\n        const urs = this.getAttribute('urs');\n        if (!urs) {\n            this.renderError('URS attribute is required');\n            return;\n        }\n        this.legendPosition = this.getAttribute('legend') || 'bottomLeft';\n        this.loadRnaData(urs);\n    }\n\n    disconnectedCallback() {\n        window.removeEventListener('resize', this.handleResize);\n        if (this.panZoomInstance) this.panZoomInstance.destroy();\n    }\n\n    injectStyles() {\n        const style = document.createElement('style');\n        style.textContent = widgetStyles;\n        this.shadowRoot.appendChild(style);\n    }\n\n    async loadRnaData(urs) {\n        this.renderLoading();\n        try {\n            const response = await fetch(`${this.apiDomain}/${urs}/2d`);\n            if (!response.ok) throw new Error(`Error ${response.status}`);\n            const data = await response.json();\n            const layout = data?.data?.layout;\n            if (!layout) throw new Error('Invalid SVG layout');\n            this.dotBracketNotation = data?.data?.secondary_structure;\n            this.renderSvg(layout);\n            await this.initPanZoom();\n        } catch (e) {\n            console.error(e);\n            this.renderError(e.message);\n        }\n    }\n\n    renderSvg(svgContent) {\n        const parser = new DOMParser();\n        const doc = parser.parseFromString(svgContent, 'image/svg+xml');\n        const svg = doc.querySelector('svg');\n\n        if (!svg) {\n            this.renderError('No SVG found');\n            return;\n        }\n\n        if (!svg.hasAttribute('viewBox')) {\n            const width = svg.getAttribute('width') || '800';\n            const height = svg.getAttribute('height') || '600';\n            svg.setAttribute('viewBox', `0 0 ${parseFloat(width)} ${parseFloat(height)}`);\n        }\n\n        svg.setAttribute('width', '100%');\n        svg.setAttribute('height', '100%');\n        svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');\n\n        // Clear previous content\n        this.shadowRoot.innerHTML = '';\n        this.injectStyles();\n\n        const container = document.createElement('div');\n        container.classList.add('viewer-container');\n\n        // Button panel\n        const buttonPanel = createButtonPanel(\n            () => this.shadowRoot.querySelector('svg'),\n            this.getAttribute('urs') || 'secondary-structure',\n            this.dotBracketNotation || ''\n        );\n        container.appendChild(buttonPanel);\n\n        // Zoom controls\n        const controls = document.createElement('div');\n        controls.classList.add('zoom-controls');\n\n        const zoomInBtn = document.createElement('button');\n        zoomInBtn.textContent = '+';\n        zoomInBtn.title = 'Zoom In';\n\n        const zoomOutBtn = document.createElement('button');\n        zoomOutBtn.textContent = '';\n        zoomOutBtn.title = 'Zoom Out';\n\n        const resetBtn = document.createElement('button');\n        resetBtn.textContent = '';\n        resetBtn.title = 'Reset View';\n\n        controls.appendChild(zoomInBtn);\n        controls.appendChild(resetBtn);\n        controls.appendChild(zoomOutBtn);\n        container.appendChild(controls);\n\n        const svgWrapper = document.createElement('div');\n        svgWrapper.classList.add('svg-container');\n        svgWrapper.appendChild(svg);\n        container.appendChild(svgWrapper);\n\n        // Legend\n        const legendContainer = document.createElement('div');\n        legendContainer.classList.add('legend-container');\n        legendContainer.classList.add(`legend-${this.legendPosition}`);\n        legendContainer.innerHTML = r2dtLegend;\n\n        if (this.legendPosition.startsWith('top')) {\n            container.insertBefore(legendContainer, container.firstChild);\n        } else {\n            container.appendChild(legendContainer);\n        }\n\n        // Dot-bracket notation\n        const outerWrapper = document.createElement('div');\n        outerWrapper.classList.add('outer-scroll-wrapper');\n        outerWrapper.appendChild(container);\n\n        if (this.dotBracketNotation) {\n            const notationWrapper = document.createElement('div');\n            notationWrapper.classList.add('dot-bracket-notation');\n\n            const heading = document.createElement('strong');\n            heading.textContent = 'Dot-bracket notation';\n\n            const notation = document.createElement('pre');\n            notation.textContent = this.dotBracketNotation;\n\n            notationWrapper.appendChild(heading);\n            notationWrapper.appendChild(notation);\n            outerWrapper.appendChild(notationWrapper);\n        }\n\n        this.shadowRoot.appendChild(outerWrapper);\n        this.zoomInBtn = zoomInBtn;\n        this.zoomOutBtn = zoomOutBtn;\n        this.resetBtn = resetBtn;\n    }\n\n    async initPanZoom() {\n        await new Promise(r => requestAnimationFrame(() => setTimeout(r, 0)));\n\n        const svg = this.shadowRoot.querySelector('svg');\n        if (!svg) return;\n\n        this.panZoomInstance = svgPanZoom(svg, {\n            zoomEnabled: true,\n            controlIconsEnabled: false,\n            fit: true,\n            center: true,\n            minZoom: 0.25,\n            maxZoom: 10\n        });\n\n        this.zoomInBtn?.addEventListener('click', () => this.panZoomInstance.zoomIn());\n        this.zoomOutBtn?.addEventListener('click', () => this.panZoomInstance.zoomOut());\n        this.resetBtn?.addEventListener('click', () => {\n            this.panZoomInstance.fit();\n            this.panZoomInstance.center();\n        });\n\n        this.handleResize = () => {\n            clearTimeout(this.resizeTimer);\n            this.resizeTimer = setTimeout(() => {\n                this.panZoomInstance.resize();\n                this.panZoomInstance.fit();\n                this.panZoomInstance.center();\n            }, 250);\n        };\n\n        window.addEventListener('resize', this.handleResize);\n    }\n\n    renderLoading() {\n        this.shadowRoot.innerHTML = '';\n        this.injectStyles();\n        const div = document.createElement('div');\n        div.className = 'r2dt-message';\n        div.textContent = 'Loading secondary structure...';\n        this.shadowRoot.appendChild(div);\n    }\n\n    renderError(message) {\n        this.shadowRoot.innerHTML = '';\n        this.injectStyles();\n        const div = document.createElement('div');\n        div.className = 'r2dt-message';\n        div.textContent = `Error: ${message}`;\n        this.shadowRoot.appendChild(div);\n    }\n}\n\ncustomElements.define('r2dt-web', R2DTWidget);\n","export const widgetStyles = `\n:host {\n  display: block;\n  width: 100%;\n  min-height: 100vh;\n  overflow: auto;\n  box-sizing: border-box;\n  font-family: sans-serif;\n}\n\n.outer-scroll-wrapper {\n  min-height: 100vh;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n}\n\n.viewer-container {\n  width: 100%;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  position: relative;\n}\n\n.mt-1 {\n  margin-top: 0.25rem !important;\n}\n\n.mt-2 {\n  margin-top: 0.5rem !important;\n}\n\n/*  button */\n.button-panel {\n  display: inline-flex;\n  flex-wrap: nowrap;\n}\n\n.btn {\n  display: inline-block;\n  color: #212529;\n  text-align: center;\n  text-decoration: none;\n  vertical-align: middle;\n  cursor: pointer;\n  background-color: transparent;\n  border: 1px solid transparent;\n  padding: 0.375rem 0.75rem;\n  font-size: 1rem;\n  line-height: 1.5;\n  transition: color 0.15s ease-in-out,\n              background-color 0.15s ease-in-out,\n              border-color 0.15s ease-in-out,\n              box-shadow 0.15s ease-in-out;\n}\n\n.btn-outline-secondary {\n  color: #6c757d;\n  border-color: #6c757d;\n}\n\n.btn-outline-secondary:hover {\n  color: #fff;\n  background-color: #6c757d;\n  border-color: #6c757d;\n}\n\n.btn + .btn {\n  margin-left: -1px; /* join buttons together */\n}\n\n.btn:focus {\n  outline: 0;\n  box-shadow: 0 0 0 0.2rem rgba(130,138,145,.5);\n}\n\n.btn-copy-message {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  margin-top: 5px;\n  color: green;\n}\n\n/* hamburger button (hidden by default on non-mobile devices) */\n.menu-toggle {\n  display: none;\n  background-color: #fff;\n  border: 1px solid #ccc;\n  font-size: 18px;\n  padding: 4px 8px;\n  cursor: pointer;\n  border-radius: 4px;\n  width: 40px;\n  height: 40px;\n  line-height: 1;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.2);\n  width: 32px;\n  height: 32px;\n}\n\n/* dropdown */\n.dropdown {\n  position: relative;\n}\n\n.dropdown-toggle::after {\n  display: inline-block;\n  margin-left: 0.255em;\n  vertical-align: 0.255em;\n  content: \"\";\n  border-top: 0.3em solid;\n  border-right: 0.3em solid transparent;\n  border-bottom: 0;\n  border-left: 0.3em solid transparent;\n}\n\n.dropdown-menu {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  z-index: 1000;\n  display: none;\n  min-width: 10rem;\n  padding: 0.5rem 0;\n  margin: 0.125rem 0 0;\n  font-size: 1rem;\n  color: #212529;\n  text-align: left;\n  background-color: #fff;\n  border: 1px solid rgba(0,0,0,0.15);\n  border-radius: 0.25rem;\n  box-shadow: 0 0.5rem 1rem rgba(0,0,0,.175);\n}\n\n.dropdown-menu.show {\n  display: block;\n}\n\n.dropdown-item {\n  display: block;\n  width: 100%;\n  padding: 0.25rem 1.5rem;\n  clear: both;\n  font-weight: 400;\n  color: #212529;\n  text-align: inherit;\n  white-space: nowrap;\n  background-color: transparent;\n  border: 0;\n  cursor: pointer;\n  text-decoration: none;\n}\n\n.dropdown-item:hover, .dropdown-item:focus {\n  color: #16181b;\n  background-color: #f8f9fa;\n}\n\n\n/* svg-pan-zoom */\n.svg-container {\n  flex: 1;\n  overflow: hidden;\n}\n\n.svg-container svg {\n  max-width: 100%;\n  max-height: 100%;\n  display: block;\n  background: white;\n}\n\n.zoom-controls {\n  position: absolute;\n  top: 60px;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  z-index: 10;\n}\n\n.zoom-controls button {\n  background-color: #fff;\n  border: 1px solid #ccc;\n  font-size: 18px;\n  padding: 4px 8px;\n  cursor: pointer;\n  border-radius: 4px;\n  width: 32px;\n  height: 32px;\n  line-height: 1;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.2);\n}\n\n.zoom-controls button:hover {\n  background-color: #f0f0f0;\n}\n\n/* error/loading message */\n.r2dt-message {\n  padding: 1em;\n  color: #666;\n}\n\n/* legend */\n.list-unstyled {\n  padding-left: 0;\n  list-style: none;\n}\n\n.legend-container {\n  position: absolute;\n  z-index: 100;\n  background-color: rgba(255, 255, 255, 0.9);\n  border-radius: 4px;\n}\n\n.legend-topRight {\n  top: 10px;\n  right: 10px;\n}\n\n.legend-topLeft {\n  top: 45px;\n  left: 50px;\n}\n\n.legend-bottomRight {\n  bottom: 10px;\n  right: 10px;\n}\n\n.legend-bottomLeft {\n  bottom: 10px;\n}\n\n.traveler-magenta {\n  background-color: rgb(255, 0, 255);\n}\n\n.traveler-green {\n  background-color: rgb(44, 162, 95);\n}\n\n.traveler-blue {\n  background-color: rgb(43, 140, 190);\n}\n\n.traveler-black {\n  background-color: rgb(0, 0, 0);\n}\n\n.traveler-key {\n  height: 20px;\n  width: 20px;\n  float: left;\n  margin-right: 8px;\n}\n\n/* dot bracket notation */\n.dot-bracket-notation {\n  padding: 1rem;\n  font-family: monospace;\n  white-space: pre-wrap;\n  background: #f5f5f5;\n  max-height: 150px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  margin-bottom: 1rem;\n}\n\n.dot-bracket-notation pre {\n  margin: 0;\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n\n.dot-bracket-notation strong {\n  display: block;\n  margin-bottom: 0.5rem;\n  font-family: sans-serif;\n}\n\n/* mobile behavior */\n@media (max-width: 768px) {\n  .menu-toggle {\n    display: inline-block;\n  }\n\n  .button-panel {\n    display: none;\n    position: absolute;\n    top: 0;\n    left: 40px;\n    flex-direction: column;\n    border: 1px solid rgba(0,0,0,0.15);\n    background-color: rgba(255, 255, 255, 0.9);\n    border-radius: 0.25rem;\n    box-shadow: 0 0.5rem 1rem rgba(0,0,0,.175);\n  }\n\n  .button-panel.show-buttons {\n    display: flex;\n  }\n\n  .button-panel .btn {\n    border: none;\n    text-align: left;\n    width: 100%;\n    color: #212529;\n    box-shadow: none;\n  }\n\n  .button-panel .btn:hover {\n    background-color: #f0f0f0;\n  }\n\n  .btn-copy-message {\n    top: -1px;\n    left: 220px;\n    color: green;\n  }\n\n  .zoom-controls {\n    top: 40px;\n  }\n\n  .legend-topLeft {\n    top: -15px;\n  }\n}\n`;\n","export const r2dtLegend = `\n<ul class=\"list-unstyled\">\n    <li class=\"mt-1\"><span class=\"traveler-black traveler-key\"></span> Same as the template</li>\n    <li class=\"mt-1\"><span class=\"traveler-green traveler-key\"></span> Modified compared to the template</li>\n    <li class=\"mt-1\"><span class=\"traveler-magenta traveler-key\"></span> Inserted nucleotides</li>\n    <li class=\"mt-1\"><span class=\"traveler-blue traveler-key\"></span> Repositioned compared to the template</li>\n    <li class=\"mt-2\"><strong>Tip:</strong> Hover over nucleotides for more details</li>\n</ul>`;"],"names":["requestTimeout","timeout","callback","window","setTimeout","module","exports","extend","target","source","prop","this","isObject","isElement","o","HTMLElement","SVGElement","SVGSVGElement","nodeType","nodeName","Object","prototype","toString","call","isNumber","n","isNaN","parseFloat","isFinite","getSvg","elementOrSelector","element","svg","String","Error","document","querySelector","tagName","toLowerCase","contentDocument","documentElement","getSVGDocument","proxy","fn","context","apply","arguments","getType","replace","mouseAndTouchNormalize","evt","clientX","clientY","touches","length","pageX","rect","getBoundingClientRect","left","pageY","top","originalEvent","isDblClick","prevEvt","detail","timeStampDiff","timeStamp","touchesDistance","Math","sqrt","pow","now","Date","getTime","throttle","func","wait","options","args","result","that","previous","later","leading","remaining","clearTimeout","trailing","createRequestAnimationFrame","refreshRate","floor","requestAnimationFrame","out$","default","xmlNs","svgNs","urlRegex","fontFormats","woff2","woff","otf","ttf","eot","sfnt","obj","requireDomNode","el","requireDomNodePromise","Promise","resolve","reject","getDimension","clone","dim","v","viewBox","baseVal","getAttribute","match","parseInt","style","getComputedStyle","getPropertyValue","uriToBlob","uri","byteString","atob","split","mimeString","buffer","ArrayBuffer","intArray","Uint8Array","i","charCodeAt","Blob","type","cachedFonts","cachedRules","inlineCss","_ref","selectorRemap","modifyStyle","modifyCss","fonts","excludeUnusedCss","generateCss","selector","properties","css","detectFonts","fontList","Array","from","styleSheets","map","sheet","rules","cssRules","href","e","console","warn","forEach","_ref2","rule","parentNode","err","query","selectorText","push","cssText","font","url","fontUrl","formats","fullUrl","startsWith","text","format","keys","filter","extension","indexOf","error","detectCssFont","all","req","XMLHttpRequest","addEventListener","fontInBase64","binary","bytes","byteLength","fromCharCode","btoa","arrayBufferToBase64","response","fontUri","open","responseType","send","then","fontCss","x","join","inlineFonts","downloadOptions","navigator","msSaveOrOpenBlob","createElement","popup","prepareSvg","done","_ref3","_ref3$left","undefined","_ref3$top","w","width","h","height","_ref3$scale","scale","_ref3$responsive","responsive","_ref3$excludeCss","excludeCss","querySelectorAll","image","getAttributeNS","lastIndexOf","location","host","valueOf","canvas","img","Image","crossOrigin","src","onerror","onload","getContext","drawImage","setAttributeNS","toDataURL","inlineImages","cloneNode","backgroundColor","_getDimensions","getBBox","_el$getBBox","y","getDimensions","setAttribute","createElementNS","appendChild","removeAttribute","foreignObject","innerHTML","defs","insertBefore","firstChild","outer","svgAsDataUri","_ref4","svgXml","decodeURIComponent","encodeURIComponent","p1","c","svgAsPngUri","_ref5","_ref5$encoderType","encoderType","_ref5$encoderOptions","encoderOptions","canvg","convertToPng","_ref6","pixelRatio","devicePixelRatio","setTransform","png","SecurityError","name","slice","download","saveLink","display","body","blob","URL","createObjectURL","onclick","revokeObjectURL","click","removeChild","title","saveSvg","downloadOpts","saveSvgAsPng","_addEventListener","_removeEventListener","support","prefix","fns","passiveListenerOption","passive","activeListenerOption","_addWheelListener","elem","eventName","isPassiveListener","cb","event","srcElement","deltaMode","deltaX","delatZ","preventDefault","returnValue","deltaY","wheelDelta","wheelDeltaX","createCallback","_removeWheelListener","getCallback","splice","removeCallback","onmousewheel","on","off","Utils","_browser","documentMode","svgNS","xmlNS","xmlnsNS","xlinkNS","evNS","getBoundingClientRectNormalized","clientWidth","clientHeight","getOrCreateViewport","viewport","childNodes","children","viewportId","toISOString","svgChildren","classNames","setupSvgAttributes","internetExplorerRedisplayInterval","refreshDefsGlobal","allDefs","allDefsCount","thisDefs","setCTM","matrix","s","a","b","d","f","transform","getEventPoint","point","createSVGPoint","getSvgCenterPoint","Wheel","ControlIcons","SvgUtils","ShadowViewport","SvgPanZoom","init","optionsDefaults","viewportSelector","panEnabled","controlIconsEnabled","zoomEnabled","dblClickZoomEnabled","mouseWheelZoomEnabled","preventMouseEventsDefault","zoomScaleSensitivity","minZoom","maxZoom","fit","contain","center","beforeZoom","onZoom","beforePan","onPan","customEventsHandler","eventsListenerElement","onUpdatedCTM","state","boundingClientRectNormalized","oldScale","newScale","oldPoint","newPoint","ctm","publicInstance","getPublicInstance","setBeforeZoom","setOnZoom","setBeforePan","setOnPan","setOnUpdatedCTM","enable","lastMouseWheelEventTime","setupHandlers","eventListeners","mousedown","handleMouseDown","touchstart","mouseup","handleMouseUp","touchend","mousemove","handleMouseMove","touchmove","mouseleave","touchleave","touchcancel","svgElement","instance","haltEventListeners","hasOwnProperty","enableMouseWheelZoom","wheelListener","handleMouseWheel","disableMouseWheelZoom","delta","timeDelta","divider","max","abs","log","inversedScreenCTM","getScreenCTM","inverse","relativeMousePoint","matrixTransform","zoom","zoomAtPoint","zoomScale","zoomAbsolute","originalState","getOriginalState","min","getZoom","oldCTM","getCTM","relativePoint","modifier","createSVGMatrix","translate","newCTM","multiply","absolute","publicZoom","computeFromRelativeZoom","publicZoomAtPoint","getRelativeZoom","resetZoom","resetPan","pan","reset","handleDblClick","zoomFactor","shiftKey","firstEventCTM","stateOrigin","viewportCTM","getViewBox","offsetX","offsetY","updateBBox","simpleViewBoxCache","panBy","getPan","getState","resize","processCTM","disableControlIcons","enableControlIcons","destroy","removeEventListener","instancesStore","pi","enablePan","disablePan","isPanEnabled","enableZoom","disableZoom","isZoomEnabled","disable","isControlIconsEnabled","enableDblClickZoom","disableDblClickZoom","isDblClickZoomEnabled","isMouseWheelZoomEnabled","setZoomScaleSensitivity","setMinZoom","setMaxZoom","zoomBy","zoomAtPointBy","zoomIn","zoomOut","getSizes","realZoom","activeState","updateCTMCached","updateCTM","cacheViewBox","svgViewBox","viewBoxValues","updateCTMOnNextFrame","bBox","computeRelativeZoom","safeCTM","willZoom","isZoomDifferent","willPan","isPanDifferent","updateCache","preventPan","preventPanX","preventPanY","pendingUpdate","textContent","zoomGroup","_createZoomIn","_createZoomReset","_createZoomOut","controlIcons","zoomInBackground","zoomInShape","resetPanZoomControl","resetPanZoomControlBackground","resetPanZoomControlShape1","resetPanZoomControlShape2","zoomOutBackground","zoomOutShape","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","definition","key","defineProperty","enumerable","get","t","r","Symbol","iterator","toStringTag","Generator","u","create","_regeneratorDefine2","p","G","bind","l","TypeError","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","m","configurable","writable","_invoke","asyncGeneratorStep","_asyncToGenerator","_next","_throw","_defineProperties","_toPropertyKey","_typeof","toPrimitive","_toPrimitive","_wrapNativeSuper","Map","Function","_isNativeFunction","has","set","Wrapper","_isNativeReflectConstruct","Reflect","construct","_setPrototypeOf","_construct","_getPrototypeOf","constructor","Boolean","R2DTWidget","_HTMLElement","_this","_classCallCheck","ReferenceError","_assertThisInitialized","_possibleConstructorReturn","_callSuper","attachShadow","mode","apiDomain","panZoomInstance","dotBracketNotation","injectStyles","_inherits","urs","legendPosition","loadRnaData","renderError","handleResize","shadowRoot","_loadRnaData","_callee","_data$data","_data$data2","data","layout","_t","_context","renderLoading","fetch","concat","ok","status","json","secondary_structure","renderSvg","initPanZoom","message","_x","svgContent","_this2","DOMParser","parseFromString","hasAttribute","container","classList","add","buttonPanel","getSvgElement","fileName","panelWrapper","toggleBtn","btnGroup","btn","svgColor","colourOn","colourOff","toggle","to","remove","createToggleColoursButton","numbersVisible","selectors","createToggleNumbersButton","divDotBracket","position","clipboard","writeText","createCopyDotBracketNotationButton","dropdown","menu","svgItem","outerHTML","pngItem","stopPropagation","contains","createDownloadDropdown","createButtonPanel","controls","zoomInBtn","zoomOutBtn","resetBtn","svgWrapper","legendContainer","outerWrapper","notationWrapper","heading","notation","_initPanZoom","_callee2","_this$zoomInBtn","_this$zoomOutBtn","_this$resetBtn","_this3","_context2","svgPanZoom","resizeTimer","div","className","customElements","define"],"sourceRoot":""}